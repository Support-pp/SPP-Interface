!function(){var d=function(a){var f=a,c=function(){return f};return{get:c,set:function(g){f=g},clone:function(){return d(c())}}},C=tinymce.util.Tools.resolve("tinymce.PluginManager"),j=function(a){return{isContextMenuVisible:function(){return a.get()}}},b=function(a){return a.settings.contextmenu_never_use_native},B=function(a){return a.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),D=function(a){return h.DOM.select(a.settings.ui_container)[0]},z=function(a,c){return{x:a,y:c}},n=function(a,f,c){return z(a.x+f,a.y+c)},e=function(c,l){if(c&&"static"!==h.DOM.getStyle(c,"position",!0)){var f=h.DOM.getPos(c),g=f.x-c.scrollLeft,a=f.y-c.scrollTop;return n(l,-g,-a)}return n(l,0,0)},p=function(g,x){if(g.inline){return e(D(g),z((a=x).pageX,a.pageY))}var m,s,f,l,a,v=(m=g.getContentAreaContainer(),s=z((l=x).clientX,l.clientY),f=h.DOM.getPos(m),n(s,f.x,f.y));return e(D(g),v)},k=tinymce.util.Tools.resolve("tinymce.ui.Factory"),A=tinymce.util.Tools.resolve("tinymce.util.Tools"),q=function(a,g,c,f){null===f.get()?f.set(function(u,x){var m,v,l=[];v=B(u),A.each(v.split(/[ ,]/),function(i){var o=u.menuItems[i];"|"===i&&(o={text:i}),o&&(o.shortcut="",l.push(o))});for(var s=0;s<l.length;s++){"|"===l[s].text&&(0!==s&&s!==l.length-1||l.splice(s,1))}return(m=k.create("menu",{items:l,context:"contextmenu",classes:"contextmenu"})).uiContainer=D(u),m.renderTo(D(u)),m.on("hide",function(i){i.control===this&&x.set(!1)}),u.on("remove",function(){m.remove(),m=null}),m}(a,c)):f.get().show(),f.get().moveTo(g.x,g.y),c.set(!0)},w=function(c,f,a){c.on("contextmenu",function(g){var i;i=c,(!g.ctrlKey||b(i))&&(g.preventDefault(),q(c,p(c,g),f,a))})};C.add("contextmenu",function(a){var f=d(null),c=d(!1);return w(a,c,f),j(c)})}();
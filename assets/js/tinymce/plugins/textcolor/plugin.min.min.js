!function(){var G=tinymce.util.Tools.resolve("tinymce.PluginManager"),N=function(a,c){var b;return a.dom.getParents(a.selection.getStart(),function(d){var f;(f=d.style["forecolor"===c?"color":"background-color"])&&(b=f)}),b},V=function(a){var b,c=[];for(b=0;b<a.length;b+=2){c.push({text:a[b+1],color:"#"+a[b]})}return c},J=function(a,b,c){a.undoManager.transact(function(){a.focus(),a.formatter.apply(b,{value:c}),a.nodeChanged()})},X=function(a,b){a.undoManager.transact(function(){a.focus(),a.formatter.remove(b,{value:null},null,!0),a.nodeChanged()})},M=function(a){a.addCommand("mceApplyTextcolor",function(b,c){J(a,b,c)}),a.addCommand("mceRemoveTextcolor",function(b){X(a,b)})},D=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),S=tinymce.util.Tools.resolve("tinymce.util.Tools"),ab=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],Q=function(a){return a.getParam("textcolor_map",ab)},Z=function(a){return a.getParam("textcolor_rows",5)},E=function(a){return a.getParam("textcolor_cols",8)},O=function(a){return a.getParam("color_picker_callback",null)},H=function(a){return a.getParam("forecolor_map",Q(a))},Y=function(a){return a.getParam("backcolor_map",Q(a))},W=function(a){return a.getParam("forecolor_rows",Z(a))},aa=function(a){return a.getParam("backcolor_rows",Z(a))},L=function(a){return a.getParam("forecolor_cols",E(a))},I=function(a){return a.getParam("backcolor_cols",E(a))},w=O,B=function(a){return"function"==typeof O(a)},U=tinymce.util.Tools.resolve("tinymce.util.I18n"),q=function(T,y,g,b){var h,F,p,C,v,P,k,ad=0,A=D.DOM.uniqueId("mcearia"),x=function(a,c){var d="transparent"===a;return'<td class="mce-grid-cell'+(d?" mce-colorbtn-trans":"")+'"><div id="'+A+"-"+ad+++'" data-mce-color="'+(a||"")+'" role="option" tabIndex="-1" style="'+(a?"background-color: "+a:"")+'" title="'+U.translate(c)+'">'+(d?"&#215;":"")+"</div></td>"};for((h=V(g)).push({text:U.translate("No color"),color:"transparent"}),p='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',C=h.length-1,P=0;P<y;P++){for(p+="<tr>",v=0;v<T;v++){p+=C<(k=P*T+v)?"<td></td>":x((F=h[k]).color,F.text)}p+="</tr>"}if(b){for(p+='<tr><td colspan="'+T+'" class="mce-custom-color-btn"><div id="'+A+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+A+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+U.translate("Custom...")+"</button></div></td></tr>",p+="<tr>",v=0;v<T;v++){p+=x("","Custom color")}p+="</tr>"}return p+="</tbody></table>"},R=function(a,b){a.style.background=b,a.setAttribute("data-mce-color",b)},z=function(a){return function(b){var c=b.control;c._color?a.execCommand("mceApplyTextcolor",c.settings.format,c._color):a.execCommand("mceRemoveTextcolor",c.settings.format)}},j=function(a,b){return function(f){var g,d=this.parent(),h=N(a,d.settings.format),c=function(e){a.execCommand("mceApplyTextcolor",d.settings.format,e),d.hidePanel(),d.color(e)};D.DOM.getParent(f.target,".mce-custom-color-btn")&&(d.hidePanel(),w(a).call(a,function(i){var l,m,k,p=d.panel.getEl().getElementsByTagName("table")[0];for(l=S.map(p.rows[p.rows.length-1].childNodes,function(e){return e.firstChild}),k=0;k<l.length&&(m=l[k]).getAttribute("data-mce-color");k++){}if(k===b){for(k=0;k<b-1;k++){R(l[k],l[k+1].getAttribute("data-mce-color"))}}R(m,i),c(i)},h)),(g=f.target.getAttribute("data-mce-color"))?(this.lastId&&D.DOM.get(this.lastId).setAttribute("aria-selected","false"),f.target.setAttribute("aria-selected",!0),this.lastId=f.target.id,"transparent"===g?(a.execCommand("mceRemoveTextcolor",d.settings.format),d.hidePanel(),d.resetColor()):c(g)):null!==g&&d.hidePanel()}},ac=function(c,b){return function(){var a=b?L(c):I(c),f=b?W(c):aa(c),g=b?H(c):Y(c),d=B(c);return q(a,f,g,d)}},K=function(a){a.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:ac(a,!0),onclick:j(a,L(a))},onclick:z(a)}),a.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:ac(a,!1),onclick:j(a,I(a))},onclick:z(a)})};G.add("textcolor",function(a){M(a),K(a)})}();
!function(){var z=function(c){var a=c,d=function(){return a};return{get:d,set:function(f){a=f},clone:function(){return z(d())}}},I=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=function(a){return a.getParam("insertdatetime_timeformat",a.translate("%H:%M:%S"))},L=function(a){return a.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},w=function(a){return a.getParam("insertdatetime_dateformat",a.translate("%Y-%m-%d"))},F=C,B=L,q=function(c){var a=L(c);return 0<a.length?a[0]:C(c)},D=function(a){return a.getParam("insertdatetime_element",!1)},K="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),E="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),x="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),J="January February March April May June July August September October November December".split(" "),A=function(c,a){if((c=""+c).length<a){for(var d=0;d<a-c.length;d++){c="0"+c}}return c},H=function(c,a,d){return d=d||new Date,a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+d.getFullYear())).replace("%y",""+d.getYear())).replace("%m",A(d.getMonth()+1,2))).replace("%d",A(d.getDate(),2))).replace("%H",""+A(d.getHours(),2))).replace("%M",""+A(d.getMinutes(),2))).replace("%S",""+A(d.getSeconds(),2))).replace("%I",""+((d.getHours()+11)%12+1))).replace("%p",d.getHours()<12?"AM":"PM")).replace("%B",""+c.translate(J[d.getMonth()]))).replace("%b",""+c.translate(x[d.getMonth()]))).replace("%A",""+c.translate(E[d.getDay()]))).replace("%a",""+c.translate(K[d.getDay()]))).replace("%%","%")},G=function(s,N){if(D(s)){var g=H(s,N),d=void 0;d=/%[HMSIp]/.test(N)?H(s,"%Y-%m-%dT%H:%M"):H(s,"%Y-%m-%d");var y=s.dom.getParent(s.selection.getStart(),"time");y?(f=y,M=d,v=g,m=(p=s).dom.create("time",{datetime:M},v),f.parentNode.insertBefore(m,f),p.dom.remove(f),p.selection.select(m,!0),p.selection.collapse(!1)):s.insertContent('<time datetime="'+d+'">'+g+"</time>")}else{s.insertContent(H(s,N))}var p,f,M,v,m},j=H,h=function(a){a.addCommand("mceInsertDate",function(){G(a,w(a))}),a.addCommand("mceInsertTime",function(){G(a,F(a))})},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),b=function(f,m){var g,c,l,d=(c=m,l=B(g=f),k.map(l,function(a){return{text:j(g,a),onclick:function(){c.set(a),G(g,a)}}}));f.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:d,onclick:function(){var a=m.get();G(f,a||q(f))}}),f.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:d,context:"insert"})};I.add("insertdatetime",function(c){var a=z(null);h(c),b(c,a)})}();
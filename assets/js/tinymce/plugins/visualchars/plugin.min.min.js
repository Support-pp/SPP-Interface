!function(){var aN,aW,aH,aJ,aM=function(c){var b=c,a=function(){return b};return{get:a,set:function(d){b=d},clone:function(){return aM(a())}}},aG=tinymce.util.Tools.resolve("tinymce.PluginManager"),aS=function(a){return{isEnabled:function(){return a.get()}}},aY=function(b,a){return b.fire("VisualChars",{state:a})},a0={"\xa0":"nbsp","\xad":"shy"},aV=function(d,c){var a,b="";for(a in d){b+=a}return new RegExp("["+b+"]",c?"g":"")},aP=function(c){var b,a="";for(b in c){a&&(a+=","),a+="span.mce-"+c[b]}return a},aI={charMap:a0,regExp:aV(a0),regExpGlobal:aV(a0,!0),selector:aP(a0),charMapToRegExp:aV,charMapToSelector:aP},aX=function(a){return function(){return a}},aO=aX(!1),aL=aX(!0),aF={noop:function(){for(var b=[],a=0;a<arguments.length;a++){b[a]=arguments[a]}},noarg:function(a){return function(){for(var c=[],b=0;b<arguments.length;b++){c[b]=arguments[b]}return a()}},compose:function(a,b){return function(){for(var d=[],c=0;c<arguments.length;c++){d[c]=arguments[c]}return a(b.apply(null,arguments))}},constant:aX,identity:function(a){return a},tripleEquals:function(b,a){return b===a},curry:function(a){for(var f=[],d=1;d<arguments.length;d++){f[d-1]=arguments[d]}for(var c=new Array(arguments.length-1),b=1;b<arguments.length;b++){c[b-1]=arguments[b]}return function(){for(var k=[],i=0;i<arguments.length;i++){k[i]=arguments[i]}for(var g=new Array(arguments.length),h=0;h<g.length;h++){g[h]=arguments[h]}var j=c.concat(g);return a.apply(null,j)}},not:function(a){return function(){for(var c=[],b=0;b<arguments.length;b++){c[b]=arguments[b]}return !a.apply(null,arguments)}},die:function(a){return function(){throw new Error(a)}},apply:function(a){return a()},call:function(a){a()},never:aO,always:aL},aT=aF.never,aU=aF.always,aC=function(){return aZ},aZ=(aJ={fold:function(b,a){return b()},is:aT,isSome:aT,isNone:aU,getOr:aH=function(a){return a},getOrThunk:aW=function(a){return a()},getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:aH,orThunk:aW,map:aC,ap:aC,each:function(){},bind:aC,flatten:aC,exists:aT,forall:aU,filter:aC,equals:aN=function(a){return a.isNone()},equals_:aN,toArray:function(){return[]},toString:aF.constant("none()")},Object.freeze&&Object.freeze(aJ),aJ),ag=function(a){var f=function(){return a},c=function(){return d},b=function(e){return e(a)},d={fold:function(h,g){return g(a)},is:function(e){return a===e},isSome:aU,isNone:aT,getOr:f,getOrThunk:f,getOrDie:f,or:c,orThunk:c,map:function(e){return ag(e(a))},ap:function(e){return e.fold(aC,function(g){return ag(g(a))})},each:function(e){e(a)},bind:b,flatten:f,exists:b,forall:b,filter:function(e){return e(a)?d:aZ},equals:function(e){return e.is(a)},equals_:function(h,g){return h.fold(aT,function(e){return g(a,e)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return d},aE={some:ag,none:aC,from:function(a){return null===a||a===undefined?aZ:ag(a)}},aD=function(a){return function(b){return function(d){if(null===d){return"null"}var c=typeof d;return"object"===c&&Array.prototype.isPrototypeOf(d)?"array":"object"===c&&String.prototype.isPrototypeOf(d)?"string":c}(b)===a}},aw={isString:aD("string"),isObject:aD("object"),isArray:aD("array"),isNull:aD("null"),isBoolean:aD("boolean"),isUndefined:aD("undefined"),isFunction:aD("function"),isNumber:aD("number")},am=(Array.prototype.indexOf,undefined,function(g,d){for(var b=g.length,c=new Array(b),f=0;f<b;f++){var a=g[f];c[f]=d(a,f,g)}return c}),aQ=function(d,c){for(var a=0,b=d.length;a<b;a++){c(d[a],a,d)}},aA=(Array.prototype.push,Array.prototype.slice,aw.isFunction(Array.from)&&Array.from,am),al=aQ,ay=function(a){if(null===a||a===undefined){throw new Error("Node cannot be null or undefined")}return{dom:aF.constant(a)}},an={fromHtml:function(c,b){var a=(b||document).createElement("div");if(a.innerHTML=c,!a.hasChildNodes()||1<a.childNodes.length){throw console.error("HTML does not have a single root node",c),"HTML must have a single root node"}return ay(a.childNodes[0])},fromTag:function(c,b){var a=(b||document).createElement(c);return ay(a)},fromText:function(c,b){var a=(b||document).createTextNode(c);return ay(a)},fromDom:ay,fromPoint:function(c,b,a){return aE.from(c.dom().elementFromPoint(b,a)).map(ay)}},ah=8,ax=9,ak=3,az=function(a){return a.dom().nodeName.toLowerCase()},aR=function(a){return a.dom().nodeType},ae=function(a){return function(b){return aR(b)===a}},aK=ae(1),at=ae(ak),ao=ae(ax),ai={name:az,type:aR,value:function(a){return a.dom().nodeValue},isElement:aK,isText:at,isDocument:ao,isComment:function(a){return aR(a)===ah||"#comment"===az(a)}},a1=function(a){return'<span data-mce-bogus="1" class="mce-'+aI.charMap[a]+'">'+a+"</span>"},av=function(f,c){var a=[],b=f.dom(),d=aA(b.childNodes,an.fromDom);return al(d,function(e){c(e)&&(a=a.concat([e])),a=a.concat(av(e,c))}),a},aB={isMatch:function(a){return ai.isText(a)&&ai.value(a)!==undefined&&aI.regExp.test(ai.value(a))},filterDescendants:av,findParentElm:function(b,a){for(;b.parentNode;){if(b.parentNode===a){return b}b=b.parentNode}},replaceWithSpans:function(a){return a.replace(aI.regExpGlobal,a1)}},au=function(a,f){var b,d,c=aB.filterDescendants(an.fromDom(f),aB.isMatch);al(c,function(h){var g=aB.replaceWithSpans(ai.value(h));for(d=a.dom.create("div",null,g);b=d.lastChild;){a.dom.insertAfter(b,h.dom())}a.dom.remove(h.dom())})},ad=function(b,c){var a=b.dom.select(aI.selector,c);al(a,function(d){b.dom.remove(d,1)})},ar=au,af=ad,aq=function(d){var c=d.getBody(),a=d.selection.getBookmark(),b=aB.findParentElm(d.selection.getNode(),c);b=b!==undefined?b:c,ad(d,b),au(d,b),d.selection.moveToBookmark(a)},ap=function(f,c){var a,b=f.getBody(),d=f.selection;c.set(!c.get()),aY(f,c.get()),a=d.getBookmark(),!0===c.get()?ar(f,b):af(f,b),d.moveToBookmark(a)},aj=function(b,a){b.addCommand("mceVisualChars",function(){ap(b,a)})},ac=tinymce.util.Tools.resolve("tinymce.util.Delay"),ab=function(c,a){var b=ac.debounce(function(){aq(c)},300);!1!==c.settings.forced_root_block&&c.on("keydown",function(d){!0===a.get()&&(13===d.keyCode?aq(c):b())})},aa=function(a){return function(c){var b=c.control;a.on("VisualChars",function(d){b.active(d.state)})}};aG.add("visualchars",function(c){var b,a=aM(!1);return aj(c,a),(b=c).addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:aa(b)}),b.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:aa(b),selectable:!0,context:"view",prependToContext:!0}),ab(c,a),aS(a)})}();
!function(){var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(e){e.settings.inline_styles=!1,e.on("init",function(){var h,g,j,f;h=e,g="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",j=c.explode(h.settings.font_size_style_values),f=h.schema,h.formatter.register({alignleft:{selector:g,attributes:{align:"left"}},aligncenter:{selector:g,attributes:{align:"center"}},alignright:{selector:g,attributes:{align:"right"}},alignjustify:{selector:g,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(i){return c.inArray(j,i.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),c.each("b,i,u,strike".split(","),function(i){f.addValidElements(i+"[*]")}),f.getElementRule("font")||f.addValidElements("font[face|size|color|style]"),c.each(g.split(","),function(k){var i=f.getElementRule(k);i&&(i.attributes.align||(i.attributes.align={},i.attributesOrder.push("align")))})})},d=function(e){e.addButton("fontsizeselect",function(){var g=[],f=e.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return e.$.each(f.split(" "),function(l,k){var m=k,j=k,h=k.split("=");1<h.length&&(m=h[0],j=h[1]),g.push({text:m,value:j})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:g,fixedWidth:!0,onPostRender:function(){var h=this;e.on("NodeChange",function(){var i;(i=e.dom.getParent(e.selection.getNode(),"font"))?h.value(i.size):h.value("")})},onclick:function(h){h.control.settings.value&&e.execCommand("FontSize",!1,h.control.settings.value)}}}),e.addButton("fontselect",function(){var g=[],f=function(i){for(var h=(i=i.replace(/;$/,"").split(";")).length;h--;){i[h]=i[h].split("=")}return i}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return e.$.each(f,function(i,h){g.push({text:{raw:h[0]},value:h[1],textStyle:-1===h[1].indexOf("dings")?"font-family:"+h[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:g,fixedWidth:!0,onPostRender:function(){var h=this;e.on("NodeChange",function(){var i;(i=e.dom.getParent(e.selection.getNode(),"font"))?h.value(i.face):h.value("")})},onselect:function(h){h.control.settings.value&&e.execCommand("FontName",!1,h.control.settings.value)}}})};b.add("legacyoutput",function(f){a(f),d(f)})}();
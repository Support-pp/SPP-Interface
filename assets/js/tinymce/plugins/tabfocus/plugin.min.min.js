!function(){var k=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),u=tinymce.util.Tools.resolve("tinymce.Env"),q=tinymce.util.Tools.resolve("tinymce.util.Delay"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),j=tinymce.util.Tools.resolve("tinymce.util.VK"),l=function(a){return a.getParam("tab_focus",a.getParam("tabfocus_elements",":prev,:next"))},g=r.DOM,b=function(a){a.keyCode!==j.TAB||a.ctrlKey||a.altKey||a.metaKey||a.preventDefault()},h=function(a){function c(x){var s,w,v,d;if(!(x.keyCode!==j.TAB||x.ctrlKey||x.altKey||x.metaKey||x.isDefaultPrevented())&&(1===(v=p.explode(l(a))).length&&(v[1]=v[0],v[0]=":prev"),w=x.shiftKey?":prev"===v[0]?f(-1):g.get(v[0]):":next"===v[1]?f(1):g.get(v[1]))){var m=o.get(w.id||w.name);w.id&&m?m.focus():q.setTimeout(function(){u.webkit||window.focus(),w.focus()},10),x.preventDefault()}function f(n){function i(y){return/INPUT|TEXTAREA|BUTTON/.test(y.tagName)&&o.get(x.id)&&-1!==y.tabIndex&&function z(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&z(e.parentNode)}(y)}if(w=g.select(":input:enabled,*[tabindex]:not(iframe)"),p.each(w,function(z,y){if(z.id===a.id){return s=y,!1}}),0<n){for(d=s+1;d<w.length;d++){if(i(w[d])){return w[d]}}}else{for(d=s-1;0<=d;d--){if(i(w[d])){return w[d]}}}return null}}a.on("init",function(){a.inline&&g.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",b),u.gecko?a.on("keypress keydown",c):a.on("keydown",c)})};k.add("tabfocus",function(a){h(a)})}();
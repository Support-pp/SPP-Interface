!function(){var ex,d7,eg,ep,ea,ed=tinymce.util.Tools.resolve("tinymce.ThemeManager"),ek=tinymce.util.Tools.resolve("tinymce.EditorManager"),d3=tinymce.util.Tools.resolve("tinymce.util.Tools"),ey=function(a){return !1!==ez(a)},ez=function(a){return a.getParam("menubar")},ev=function(a){return a.getParam("toolbar_items_size")},eq=function(a){return a.getParam("menu")},eh=function(a){return !1===a.settings.skin},es=function(b){var a=b.getParam("resize","vertical");return !1===a?"none":"both"===a?"both":"vertical"},ec=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d4=tinymce.util.Tools.resolve("tinymce.ui.Factory"),eA=tinymce.util.Tools.resolve("tinymce.util.I18n"),d8=function(a){return a.fire("SkinLoaded")},d1=function(a){return a.fire("ResizeEditor")},d2=function(a){return a.fire("BeforeRenderUI")},eC=function(a,b){return function(){var c=a.find(b)[0];c&&c.focus(!0)}},eD=function(b,a){b.shortcuts.add("Alt+F9","",eC(a,"menubar")),b.shortcuts.add("Alt+F10,F10","",eC(a,"toolbar")),b.shortcuts.add("Alt+F11","",eC(a,"elementpath")),a.on("cancel",function(){b.focus()})},eP=tinymce.util.Tools.resolve("tinymce.geom.Rect"),d5=tinymce.util.Tools.resolve("tinymce.util.Delay"),fa=function(a){return function(){return a}},el=fa(!1),e8=fa(!0),e3={noop:function(){for(var b=[],a=0;a<arguments.length;a++){b[a]=arguments[a]}},noarg:function(a){return function(){for(var c=[],b=0;b<arguments.length;b++){c[b]=arguments[b]}return a()}},compose:function(b,a){return function(){for(var d=[],c=0;c<arguments.length;c++){d[c]=arguments[c]}return b(a.apply(null,arguments))}},constant:fa,identity:function(a){return a},tripleEquals:function(b,a){return b===a},curry:function(d){for(var c=[],a=1;a<arguments.length;a++){c[a-1]=arguments[a]}for(var b=new Array(arguments.length-1),f=1;f<arguments.length;f++){b[f-1]=arguments[f]}return function(){for(var k=[],h=0;h<arguments.length;h++){k[h]=arguments[h]}for(var l=new Array(arguments.length),g=0;g<l.length;g++){l[g]=arguments[g]}var j=b.concat(l);return d.apply(null,j)}},not:function(a){return function(){for(var c=[],b=0;b<arguments.length;b++){c[b]=arguments[b]}return !a.apply(null,arguments)}},die:function(a){return function(){throw new Error(a)}},apply:function(a){return a()},call:function(a){a()},never:el,always:e8},eO=e3.never,eW=e3.always,eN=function(){return eR},eR=(ep={fold:function(b,a){return b()},is:eO,isSome:eO,isNone:eW,getOr:eg=function(a){return a},getOrThunk:d7=function(a){return a()},getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},or:eg,orThunk:d7,map:eN,ap:eN,each:function(){},bind:eN,flatten:eN,exists:eO,forall:eW,filter:eN,equals:ex=function(a){return a.isNone()},equals_:ex,toArray:function(){return[]},toString:e3.constant("none()")},Object.freeze&&Object.freeze(ep),ep),eI=function(f){var d=function(){return f},b=function(){return c},a=function(g){return g(f)},c={fold:function(h,g){return g(f)},is:function(g){return f===g},isSome:eW,isNone:eO,getOr:d,getOrThunk:d,getOrDie:d,or:b,orThunk:b,map:function(g){return eI(g(f))},ap:function(g){return g.fold(eN,function(h){return eI(h(f))})},each:function(g){g(f)},bind:a,flatten:d,exists:a,forall:a,filter:function(g){return g(f)?c:eR},equals:function(g){return g.is(f)},equals_:function(h,g){return h.fold(eO,function(i){return g(f,i)})},toArray:function(){return[f]},toString:function(){return"some("+f+")"}};return c},eU={some:eI,none:eN,from:function(a){return null===a||a===undefined?eR:eI(a)}},e9=function(a){return a?a.getRoot().uiContainer:null},fd={getUiContainerDelta:function(d){var b=e9(d);if(b&&"static"!==ec.DOM.getStyle(b,"position",!0)){var f=ec.DOM.getPos(b),a=b.scrollLeft-f.x,c=b.scrollTop-f.y;return eU.some({x:a,y:c})}return eU.none()},setUiContainer:function(b,a){var c=ec.DOM.select(b.settings.ui_container)[0];a.getRoot().uiContainer=c},getUiContainer:e9,inheritUiContainer:function(b,a){return a.uiContainer=e9(b)}},fc=function(a,d,c){var f,b=[];if(d){return d3.each(d.split(/[ ,]/),function(g){var h,i=function(){var j=a.selection;g.settings.stateSelector&&j.selectorChanged(g.settings.stateSelector,function(k){g.active(k)},!0),g.settings.disabledStateSelector&&j.selectorChanged(g.settings.disabledStateSelector,function(k){g.disabled(k)})};"|"===g?f=null:(f||(f={type:"buttongroup",items:[]},b.push(f)),a.buttons[g]&&(h=g,"function"==typeof(g=a.buttons[h])&&(g=g()),g.type=g.type||"button",g.size=c,g=d4.create(g),f.items.push(g),a.initialized?i():a.on("init",i)))}),{type:"toolbar",layout:"flow",items:b}}},eT=fc,d0=function(f,b){var d,a,c=[];if(d3.each(!1===(a=(d=f).getParam("toolbar"))?[]:d3.isArray(a)?d3.grep(a,function(g){return 0<g.length}):function(k,h){for(var m=[],g=1;g<10;g++){var j=k["toolbar"+g];if(!j){break}m.push(j)}var l=k.toolbar?[k.toolbar]:[h];return 0<m.length?m:l}(d.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),function(h){var g;(g=h)&&c.push(fc(f,g,b))}),c.length){return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:c}}},eY=ec.DOM,e2=function(a){return{left:a.x,top:a.y,width:a.w,height:a.h,right:a.x+a.w,bottom:a.y+a.h}},e7=function(b,a){b.moveTo(a.left,a.top)},eL=function(d,b,g,a,c,f){return f=e2({x:b,y:g,w:f.w,h:f.h}),d&&(f=d({elementRect:e2(a),contentAreaRect:e2(c),panelRect:f})),f},eJ=function(b){var e,h=function(){return b.contextToolbars||[]},j=function(K,x){var D,G,A,C,z,O,F,w=b.getParam("inline_toolbar_position_handler");if(!b.removed){if(!K||!K.toolbar.panel){return M=b,void d3.each(M.contextToolbars,function(a){a.panel&&a.panel.hide()})}var M,L,J,H,E;F=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],z=K.toolbar.panel,x&&z.show(),L=K.element,J=eY.getPos(b.getContentAreaContainer()),H=b.dom.getRect(L),"BODY"===(E=b.dom.getRoot()).nodeName&&(H.x-=E.ownerDocument.documentElement.scrollLeft||E.scrollLeft,H.y-=E.ownerDocument.documentElement.scrollTop||E.scrollTop),H.x+=J.x,H.y+=J.y,A=H,G=eY.getRect(z.getEl()),C=eY.getRect(b.getContentAreaContainer()||b.getBody());var I,B,q,N=fd.getUiContainerDelta(z).getOr({x:0,y:0});if(A.x+=N.x,A.y+=N.y,G.x+=N.x,G.y+=N.y,C.x+=N.x,C.y+=N.y,"inline"!==eY.getStyle(K.element,"display",!0)){var k=K.element.getBoundingClientRect();A.w=k.width,A.h=k.height}b.inline||(C.w=b.getDoc().documentElement.offsetWidth),b.selection.controlSelection.isResizable(K.element)&&A.w<25&&(A=eP.inflate(A,0,8)),D=eP.findBestRelativePosition(G,A,C,F),A=eP.clamp(A,C),D?(O=eP.relativePosition(G,A,D),e7(z,eL(w,O.x,O.y,A,C,G))):(C.h+=G.h,(A=eP.intersect(C,A))?(D=eP.findBestRelativePosition(G,A,C,["bc-tc","bl-tl","br-tr"]))?(O=eP.relativePosition(G,A,D),e7(z,eL(w,O.x,O.y,A,C,G))):e7(z,eL(w,A.x,A.y,A,C,G)):z.hide()),I=z,q=function(i,a){return i===a},B=(B=D)?B.substr(0,2):"",d3.each({t:"down",b:"up"},function(i,a){I.classes.toggle("arrow-"+i,q(a,B.substr(0,1)))}),d3.each({l:"left",r:"right"},function(i,a){I.classes.toggle("arrow-"+i,q(a,B.substr(1,1)))})}},g=function(a){return function(){d5.requestAnimationFrame(function(){b.selection&&j(c(b.selection.getNode()),a)})}},d=function(i){var a;if(i.toolbar.panel){return i.toolbar.panel.show(),void j(i)}a=d4.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:eT(b,i.toolbar.items),oncancel:function(){b.focus()}}),fd.setUiContainer(b,a),function(l){if(!e){var k=g(!0),m=fd.getUiContainer(l);e=b.selection.getScrollContainer()||b.getWin(),eY.bind(e,"scroll",k),eY.bind(m,"scroll",k),b.on("remove",function(){eY.unbind(e,"scroll",k),eY.unbind(m,"scroll",k)})}}(a),(i.toolbar.panel=a).renderTo().reflow(),j(i)},f=function(){d3.each(h(),function(a){a.panel&&a.panel.hide()})},c=function(m){var k,o,a,l=h();for(k=(a=b.$(m).parents().add(m)).length-1;0<=k;k--){for(o=l.length-1;0<=o;o--){if(l[o].predicate(a[k])){return{toolbar:l[o],element:a[k]}}}}return null};b.on("click keyup setContent ObjectResized",function(a){("setcontent"!==a.type||a.selection)&&d5.setEditorTimeout(b,function(){var i;(i=c(b.selection.getNode()))?(f(),d(i)):f()})}),b.on("blur hide contextmenu",f),b.on("ObjectResizeStart",function(){var a=c(b.selection.getNode());a&&a.toolbar.panel&&a.toolbar.panel.hide()}),b.on("ResizeEditor ResizeWindow",g(!0)),b.on("nodeChange",g(!1)),b.on("remove",function(){d3.each(h(),function(a){a.panel&&a.panel.remove()}),b.contextToolbars={}}),b.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var a=c(b.selection.getNode());a&&a.toolbar.panel&&a.toolbar.panel.items()[0].focus()})},em=function(a){return function(b){return function(d){if(null===d){return"null"}var c=typeof d;return"object"===c&&Array.prototype.isPrototypeOf(d)?"array":"object"===c&&String.prototype.isPrototypeOf(d)?"string":c}(b)===a}},eb={isString:em("string"),isObject:em("object"),isArray:em("array"),isNull:em("null"),isBoolean:em("boolean"),isUndefined:em("undefined"),isFunction:em("function"),isNumber:em("number")},eG=(ea=Array.prototype.indexOf)===undefined?function(b,a){return eQ(b,a)}:function(b,a){return ea.call(b,a)},fx=function(b,a){return -1<eG(b,a)},eH=function(d,b){for(var g=d.length,a=new Array(g),c=0;c<g;c++){var f=d[c];a[c]=b(f,c,d)}return a},e1=function(c,b){for(var d=0,a=c.length;d<a;d++){b(c[d],d,c)}},e5=function(b,a){for(var c=b.length-1;0<=c;c--){a(b[c],c,b)}},eZ=function(d,b){for(var g=[],a=0,c=d.length;a<c;a++){var f=d[a];b(f,a,d)&&g.push(f)}return g},eF=function(c,b){for(var d=0,a=c.length;d<a;d++){if(b(c[d],d,c)){return eU.some(d)}}return eU.none()},eQ=function(c,b){for(var d=0,a=c.length;d<a;++d){if(c[d]===b){return d}}return -1},dO=Array.prototype.push,a2=function(c){for(var b=[],d=0,a=c.length;d<a;++d){if(!Array.prototype.isPrototypeOf(c[d])){throw new Error("Arr.flatten item "+d+" was not an array, input: "+c)}dO.apply(b,c[d])}return b},cd=function(c,b){for(var d=0,a=c.length;d<a;++d){if(!0!==b(c[d],d,c)){return !1}}return !0},c4=Array.prototype.slice,bx=eb.isFunction(Array.from)?Array.from:function(a){return c4.call(a)},bZ={map:eH,each:e1,eachr:e5,partition:function(f,b){for(var h=[],a=[],d=0,g=f.length;d<g;d++){var c=f[d];(b(c,d,f)?h:a).push(c)}return{pass:h,fail:a}},filter:eZ,groupBy:function(h,k){if(0===h.length){return[]}for(var d=k(h[0]),g=[],b=[],c=0,m=h.length;c<m;c++){var j=h[c],f=k(j);f!==d&&(g.push(b),b=[]),d=f,b.push(j)}return 0!==b.length&&g.push(b),g},indexOf:function(b,a){var c=eG(b,a);return -1===c?eU.none():eU.some(c)},foldr:function(b,a,c){return e5(b,function(d){c=a(c,d)}),c},foldl:function(b,a,c){return e1(b,function(d){c=a(c,d)}),c},find:function(d,b){for(var f=0,a=d.length;f<a;f++){var c=d[f];if(b(c,f,d)){return eU.some(c)}}return eU.none()},findIndex:eF,flatten:a2,bind:function(b,a){var c=eH(b,a);return a2(c)},forall:cd,exists:function(b,a){return eF(b,a).isSome()},contains:fx,equal:function(a,b){return a.length===b.length&&cd(a,function(d,c){return d===b[c]})},reverse:function(b){var a=c4.call(b,0);return a.reverse(),a},chunk:function(d,b){for(var f=[],a=0;a<d.length;a+=b){var c=d.slice(a,a+b);f.push(c)}return f},difference:function(b,a){return eZ(b,function(c){return !fx(a,c)})},mapToObject:function(d,b){for(var g={},a=0,c=d.length;a<c;a++){var f=d[a];g[String(f)]=b(f,a)}return g},pure:function(a){return[a]},sort:function(b,a){var c=c4.call(b,0);return c.sort(a),c},range:function(c,b){for(var d=[],a=0;a<c;a++){d.push(b(a))}return d},head:function(a){return 0===a.length?eU.none():eU.some(a[0])},last:function(a){return 0===a.length?eU.none():eU.some(a[a.length-1])},from:bx},bf={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},fw=function(b,a){return"|"===b?{name:"|",item:{text:"|"}}:a?{name:b,item:a}:null},cC=function(a){return a&&"|"===a.item.text},aS=function(g,k,w,b){var j,f,x,q,h,v,p,m;return k?(f=k[b],q=!0):f=bf[b],f&&(j={text:f.title},x=[],d3.each((f.items||"").split(/[ ,]/),function(c){var a=fw(c,g[c]);a&&x.push(a)}),q||d3.each(g,function(d,c){var l,a;d.context!==b||(l=x,a=c,bZ.findIndex(l,function(i){return i.name===a}).isSome())||("before"===d.separator&&x.push({name:"|",item:{text:"|"}}),d.prependToContext?x.unshift(fw(c,d)):x.push(fw(c,d)),"after"===d.separator&&x.push({name:"|",item:{text:"|"}}))}),j.menu=bZ.map((h=x,v=w,p=bZ.filter(h,function(a){return !1===v.hasOwnProperty(a.name)}),m=bZ.filter(p,function(c,a,d){return !cC(c)||!cC(d[a-1])}),bZ.filter(m,function(c,a,d){return !cC(c)||0<a&&a<d.length-1})),function(a){return a.item}),!j.menu.length)?null:j},ew=function(h){for(var m,d=[],g=function(o){var l,q=[],a=eq(o);if(a){for(l in a){q.push(l)}}else{for(l in bf){q.push(l)}}return q}(h),b=d3.makeMap((m=h,m.getParam("removed_menuitems","")).split(/[ ,]/)),c=ez(h),p="string"==typeof c?c.split(/[ ,]/):g,j=0;j<p.length;j++){var f=p[j],k=aS(h.menuItems,eq(h),b,f);k&&d.push(k)}return d},dX=ec.DOM,dE=function(a){return{width:a.clientWidth,height:a.clientHeight}},df=function(f,b,h){var a,d,g,c;a=f.getContainer(),d=f.getContentAreaContainer().firstChild,g=dE(a),c=dE(d),null!==b&&(b=Math.max(f.getParam("min_width",100,"number"),b),b=Math.min(f.getParam("max_width",65535,"number"),b),dX.setStyle(a,"width",b+(g.width-c.width)),dX.setStyle(d,"width",b)),h=Math.max(f.getParam("min_height",100,"number"),h),h=Math.min(f.getParam("max_height",65535,"number"),h),dX.setStyle(d,"height",h),d1(f)},cq=df,du=function(c,b,d){var a=c.getContentAreaContainer();df(c,a.clientWidth+b,a.clientHeight+d)},bP=tinymce.util.Tools.resolve("tinymce.Env"),aI=function(d,b,f){var a,c=d.settings[f];c&&c((a=b.getEl("body"),{element:function(){return a}}))},e6=function(e,b,a){return function(j){var p,f,h,c,d,q=j.control,k=q.parents().filter("panel")[0],g=k.find("#"+b)[0],m=(p=a,f=b,d3.grep(p,function(i){return i.name===f})[0]);h=b,c=k,d=a,d3.each(d,function(l){var i=c.items().filter("#"+l.name)[0];i&&i.visible()&&l.name!==h&&(aI(l,i,"onhide"),i.visible(!1))}),q.parent().items().each(function(i){i.active(!1)}),g&&g.visible()?(aI(m,g,"onhide"),g.hide(),q.active(!1)):(g?g.show():(g=d4.create({type:"container",name:b,layout:"stack",classes:"sidebar-panel",html:""}),k.prepend(g),aI(m,g,"onrender")),aI(m,g,"onshow"),q.active(!0)),d1(e)}},fE=function(a){return !(bP.ie&&!(11<=bP.ie)||!a.sidebars)&&0<a.sidebars.length},ah=function(a){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:d3.map(a.sidebars,function(c){var b=c.settings;return{type:"button",icon:b.icon,image:b.image,tooltip:b.tooltip,onclick:e6(a,c.name,a.sidebars)}})}]}},ay=function(b){var a=function(){b._skinLoaded=!0,d8(b)};return function(){b.initialized?a():b.on("init",a)}},ao=ec.DOM,cO=function(a){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:a,html:""}},aX=function(m,h,d){var g,b,c,p,j;if(!1===eh(m)&&d.skinUiCss?ao.styleSheetLoader.load(d.skinUiCss,ay(m)):ay(m)(),g=h.panel=d4.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===ey(m)?null:{type:"menubar",border:"0 0 1 0",items:ew(m)},d0(m,ev(m))]},fE(m)?(p=m,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[cO("0"),ah(p)]}):cO("1 0 0 0")]}),fd.setUiContainer(m,g),"none"!==es(m)&&(b={type:"resizehandle",direction:es(m),onResizeStart:function(){var a=m.getContentAreaContainer().firstChild;c={width:a.clientWidth,height:a.clientHeight}},onResize:function(a){"both"===es(m)?cq(m,c.width+a.deltaX,c.height+a.deltaY):cq(m,null,c.height+a.deltaY)}}),m.getParam("statusbar",!0,"boolean")){var f=eA.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),k=m.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+f}:null;g.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:m},b,k]})}return d2(m),m.on("SwitchMode",(j=g,function(a){j.find("*").disabled("readonly"===a.mode)})),g.renderBefore(d.targetNode).reflow(),m.getParam("readonly",!1,"boolean")&&m.setMode("readonly"),d.width&&ao.setStyle(g.getEl(),"width",d.width),m.on("remove",function(){g.remove(),g=null}),eD(m,g),eJ(m),{iframeContainer:g.find("#iframe")[0].getEl(),editorContainer:g.getEl()}},cM=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),aD=0,fz={id:function(){return"mceu_"+aD++},create:function(c,b,d){var a=document.createElement(c);return ec.DOM.setAttribs(a,b),"string"==typeof d?a.innerHTML=d:d3.each(d,function(f){f.nodeType&&a.appendChild(f)}),a},createFragment:function(a){return ec.DOM.createFragment(a)},getWindowSize:function(){return ec.DOM.getViewPort()},getSize:function(c){var b,d;if(c.getBoundingClientRect){var a=c.getBoundingClientRect();b=Math.max(a.width||a.right-a.left,c.offsetWidth),d=Math.max(a.height||a.bottom-a.bottom,c.offsetHeight)}else{b=c.offsetWidth,d=c.offsetHeight}return{width:b,height:d}},getPos:function(b,a){return ec.DOM.getPos(b,a||fz.getContainer())},getContainer:function(){return bP.container?bP.container:document.body},getViewPort:function(a){return ec.DOM.getViewPort(a)},get:function(a){return document.getElementById(a)},addClass:function(b,a){return ec.DOM.addClass(b,a)},removeClass:function(b,a){return ec.DOM.removeClass(b,a)},hasClass:function(b,a){return ec.DOM.hasClass(b,a)},toggleClass:function(b,a,c){return ec.DOM.toggleClass(b,a,c)},css:function(b,a,c){return ec.DOM.setStyle(b,a,c)},getRuntimeStyle:function(b,a){return ec.DOM.getStyle(b,a,!0)},on:function(c,b,d,a){return ec.DOM.bind(c,b,d,a)},off:function(b,a,c){return ec.DOM.unbind(b,a,c)},fire:function(b,a,c){return ec.DOM.fire(b,a,c)},innerHtml:function(b,a){ec.DOM.setHTML(b,a)}},cE=function(a){return"static"===fz.getRuntimeStyle(a,"position")},dG=function(a){return a.state.get("fixed")};function cu(p,y,h){var k,b,g,z,w,j,x,v,q,m;return q=c6(),g=(b=fz.getPos(y,fd.getUiContainer(p))).x,z=b.y,dG(p)&&cE(document.body)&&(g-=q.x,z-=q.y),k=p.getEl(),w=(m=fz.getSize(k)).width,j=m.height,x=(m=fz.getSize(y)).width,v=m.height,"b"===(h=(h||"").split(""))[0]&&(z+=v),"r"===h[1]&&(g+=x),"c"===h[0]&&(z+=Math.round(v/2)),"c"===h[1]&&(g+=Math.round(x/2)),"b"===h[3]&&(z-=j),"r"===h[4]&&(g-=w),"c"===h[3]&&(z-=Math.round(j/2)),"c"===h[4]&&(g-=Math.round(w/2)),{x:g,y:z,w:w,h:j}}var c6=function(){var b=window,a=Math.max(b.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),c=Math.max(b.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:a,y:c,w:a+(b.innerWidth||document.documentElement.clientWidth),h:c+(b.innerHeight||document.documentElement.clientHeight)}},bR=function(b){var a,c=fd.getUiContainer(b);return c&&!dG(b)?{x:0,y:0,w:(a=c).scrollWidth-1,h:a.scrollHeight-1}:c6()},dw={testMoveRel:function(d,b){for(var f=bR(this),a=0;a<b.length;a++){var c=cu(this,d,b[a]);if(dG(this)){if(0<c.x&&c.x+c.w<f.w&&0<c.y&&c.y+c.h<f.h){return b[a]}}else{if(c.x>f.x&&c.x+c.w<f.w&&c.y>f.y&&c.y+c.h<f.h){return b[a]}}}return b[0]},moveRel:function(b,a){"string"!=typeof a&&(a=this.testMoveRel(b,a));var c=cu(this,b,a);return this.moveTo(c.x,c.y)},moveBy:function(b,a){var c=this.layoutRect();return this.moveTo(c.x+b,c.y+a),this},moveTo:function(f,b){var h=this;function a(j,i,k){return j<0?0:i<j+k&&(j=i-k)<0?0:j}if(h.settings.constrainToViewport){var d=bR(this),g=h.layoutRect();f=a(f,d.w,g.w),b=a(b,d.h,g.h)}var c=fd.getUiContainer(h);return c&&cE(c)&&!dG(h)&&(f-=c.scrollLeft,b-=c.scrollTop),c&&(f+=1,b+=1),h.state.get("rendered")?h.layoutRect({x:f,y:b}).repaint():(h.settings.x=f,h.settings.y=b),h.fire("move",{x:f,y:b}),h}},aN=tinymce.util.Tools.resolve("tinymce.util.Class"),bo=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),a7=function(b){var a;if(b){return"number"==typeof b?{top:b=b||0,left:b,bottom:b,right:b}:(1===(a=(b=b.split(" ")).length)?b[1]=b[2]=b[3]=b[0]:2===a?(b[2]=b[0],b[3]=b[1]):3===a&&(b[3]=b[1]),{top:parseInt(b[0],10)||0,right:parseInt(b[1],10)||0,bottom:parseInt(b[2],10)||0,left:parseInt(b[3],10)||0})}},dh=function(b,c){function a(f){var d=parseFloat(function(h){var g=b.ownerDocument.defaultView;if(g){var i=g.getComputedStyle(b,null);return i?(h=h.replace(/[A-Z]/g,function(j){return"-"+j}),i.getPropertyValue(h)):null}return b.currentStyle[h]}(f));return isNaN(d)?0:d}return{top:a(c+"TopWidth"),right:a(c+"RightWidth"),bottom:a(c+"BottomWidth"),left:a(c+"LeftWidth")}};function fp(){}function dQ(a){this.cls=[],this.cls._map={},this.onchange=a||fp,this.prefix=""}d3.extend(dQ.prototype,{add:function(a){return a&&!this.contains(a)&&(this.cls._map[a]=!0,this.cls.push(a),this._change()),this},remove:function(b){if(this.contains(b)){var a=void 0;for(a=0;a<this.cls.length&&this.cls[a]!==b;a++){}this.cls.splice(a,1),delete this.cls._map[b],this._change()}return this},toggle:function(b,a){var c=this.contains(b);return c!==a&&(c?this.remove(b):this.add(b),this._change()),this},contains:function(a){return !!this.cls._map[a]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),dQ.prototype.toString=function(){var b;if(this.clsValue){return this.clsValue}b="";for(var a=0;a<this.cls.length;a++){0<a&&(b+=" "),b+=this.prefix+this.cls[a]}return b};var ff,aq,cg,b1=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,cV=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bF=/^\s*|\s*$/g,bz=aN.extend({init:function(d){var f=this.match;function c(j,g,k){var a;function h(i){i&&g.push(i)}return h(function(e){if(e){return e=e.toLowerCase(),function(i){return"*"===e||i.type===e}}}((a=b1.exec(j.replace(bF,"")))[1])),h(function(e){if(e){return function(i){return i._name===e}}}(a[2])),h(function(e){if(e){return e=e.split("."),function(l){for(var i=e.length;i--;){if(!l.classes.contains(e[i])){return !1}}return !0}}}(a[3])),h(function(m,e,l){if(m){return function(n){var i=n[m]?n[m]():"";return e?"="===e?i===l:"*="===e?0<=i.indexOf(l):"~="===e?0<=(" "+i+" ").indexOf(" "+l+" "):"!="===e?i!==l:"^="===e?0===i.indexOf(l):"$="===e&&i.substr(i.length-l.length)===l:!!l}}}(a[4],a[5],a[6])),h(function(l){var e;if(l){return(l=/(?:not\((.+)\))|(.+)/i.exec(l))[1]?(e=b(l[1],[]),function(i){return !f(i,e)}):(l=l[2],function(m,i,o){return"first"===l?0===i:"last"===l?i===o-1:"even"===l?i%2==0:"odd"===l?i%2==1:!!m[l]&&m[l]()})}}(a[7])),g.pseudo=!!a[7],g.direct=k,g}function b(j,g){var l,a,h,k=[];do{if(cV.exec(""),(a=cV.exec(j))&&(j=a[3],k.push(a[1]),a[2])){l=a[3];break}}while(a);for(l&&b(l,g),j=[],h=0;h<k.length;h++){">"!==k[h]&&j.push(c(k[h],[],">"===k[h-1]))}return g.push(j),g}this._selectors=b(d,[])},match:function(x,C){var j,q,b,g,D,A,p,B,z,y,w,v,k;for(j=0,q=(C=C||this._selectors).length;j<q;j++){for(k=x,v=0,b=(g=(D=C[j]).length)-1;0<=b;b--){for(B=D[b];k;){if(B.pseudo){for(z=y=(w=k.parent().items()).length;z--&&w[z]!==k;){}}for(A=0,p=B.length;A<p;A++){if(!B[A](k,z,y)){A=p+1;break}}if(A===p){v++;break}if(b===g-1){break}k=k.parent()}}if(v===g){return !0}}return !1},find:function(f){var d,h,a=[],b=this._selectors;function g(q,v,k){var p,c,j,w,u,m=v[k];for(p=0,c=q.length;p<c;p++){for(u=q[p],j=0,w=m.length;j<w;j++){if(!m[j](u,p,c)){j=w+1;break}}if(j===w){k===v.length-1?a.push(u):u.items&&g(u.items(),v,k+1)}else{if(m.direct){return}}u.items&&g(u.items(),v,k)}}if(f.items){for(d=0,h=b.length;d<h;d++){g(f.items(),b[d],0)}1<h&&(a=function(k){for(var j,l=[],c=k.length;c--;){(j=k[c]).__checked||(l.push(j),j.__checked=1)}for(c=l.length;c--;){delete l[c].__checked}return l}(a))}return ff||(ff=bz.Collection),new ff(a)}}),b8=Array.prototype.push,bH=Array.prototype.slice;cg={length:0,init:function(a){a&&this.add(a)},add:function(a){return d3.isArray(a)?b8.apply(this,a):a instanceof aq?this.add(a.toArray()):b8.call(this,a),this},set:function(c){var b,d=this,a=d.length;for(d.length=0,d.add(c),b=d.length;b<a;b++){delete d[b]}return d},filter:function(b){var d,g,a,c,f=[];for("string"==typeof b?(b=new bz(b),c=function(h){return b.match(h)}):c=b,d=0,g=this.length;d<g;d++){c(a=this[d])&&f.push(a)}return new aq(f)},slice:function(){return new aq(bH.apply(this,arguments))},eq:function(a){return -1===a?this.slice(a):this.slice(a,+a+1)},each:function(a){return d3.each(this,a),this},toArray:function(){return d3.toArray(this)},indexOf:function(b){for(var a=this.length;a--&&this[a]!==b;){}return a},reverse:function(){return new aq(d3.toArray(this).reverse())},hasClass:function(a){return !!this[0]&&this[0].classes.contains(a)},prop:function(a,c){var b;return c!==undefined?(this.each(function(d){d[a]&&d[a](c)}),this):(b=this[0])&&b[a]?b[a]():void 0},exec:function(a){var b=d3.toArray(arguments).slice(1);return this.each(function(c){c[a]&&c[a].apply(c,b)}),this},remove:function(){for(var a=this.length;a--;){this[a].remove()}return this},addClass:function(a){return this.each(function(b){b.classes.add(a)})},removeClass:function(a){return this.each(function(b){b.classes.remove(a)})}},d3.each("fire on off show hide append prepend before after reflow".split(" "),function(a){cg[a]=function(){var b=d3.toArray(arguments);return this.each(function(c){a in c&&c[a].apply(c,b)}),this}}),d3.each("text name disabled active selected checked visible parent value data".split(" "),function(a){cg[a]=function(b){return this.prop(a,b)}}),aq=aN.extend(cg);var eE=bz.Collection=aq,fI=function(a){this.create=a.create};fI.create=function(a,b){return new fI({create:function(d,g){var c,f=function(h){d.set(g,h.value)};return d.on("change:"+g,function(h){a.set(b,h.value)}),a.on("change:"+b,f),(c=d._bindings)||(c=d._bindings=[],d.on("destroy",function(){for(var h=c.length;h--;){c[h]()}})),c.push(function(){a.off("change:"+b,f)}),a.get(b)}})};var dZ=tinymce.util.Tools.resolve("tinymce.util.Observable");function bl(a){return 0<a.nodeType}var cX,dH,aY=aN.extend({Mixins:[dZ],init:function(b){var a,c;for(a in b=b||{}){(c=b[a]) instanceof fI&&(b[a]=c.create(this,a))}this.data=b},set:function(b,g){var a,c,f=this.data[b];if(g instanceof fI&&(g=g.create(this,b)),"object"==typeof b){for(a in b){this.set(a,b[a])}return this}return function d(h,k){var e,j;if(h===k){return !0}if(null===h||null===k){return h===k}if("object"!=typeof h||"object"!=typeof k){return h===k}if(d3.isArray(k)){if(h.length!==k.length){return !1}for(e=h.length;e--;){if(!d(h[e],k[e])){return !1}}}if(bl(h)||bl(k)){return h===k}for(e in j={},k){if(!d(h[e],k[e])){return !1}j[e]=!0}for(e in h){if(!j[e]&&!d(h[e],k[e])){return !1}}return !0}(f,g)||(this.data[b]=g,c={target:this,name:b,value:g,oldValue:f},this.fire("change:"+b,c),this.fire("change",c)),this},get:function(a){return this.data[a]},has:function(a){return a in this.data},bind:function(a){return fI.create(this,a)},destroy:function(){this.fire("destroy")}}),b4={},cY={add:function(b){var a=b.parent();if(a){if(!a._layout||a._layout.isNative()){return}b4[a._id]||(b4[a._id]=a),cX||(cX=!0,d5.requestAnimationFrame(function(){var d,c;for(d in cX=!1,b4){(c=b4[d]).state.get("rendered")&&c.reflow()}b4={}},document.body))}},remove:function(a){b4[a._id]&&delete b4[a._id]}},bp="onmousewheel" in document,bS=!1,a8=0,fk={Statics:{classPrefix:"mce-"},isRtl:function(){return dH.rtl},classPrefix:"mce-",init:function(b){var d,f,a=this;function c(h){var g;for(h=h.split(" "),g=0;g<h.length;g++){a.classes.add(h[g])}}a.settings=b=d3.extend({},a.Defaults,b),a._id=b.id||"mceu_"+a8++,a._aria={role:b.role},a._elmCache={},a.$=cM,a.state=new aY({visible:!0,active:!1,disabled:!1,value:""}),a.data=new aY(b.data),a.classes=new dQ(function(){a.state.get("rendered")&&(a.getEl().className=this.toString())}),a.classes.prefix=a.classPrefix,(d=b.classes)&&(a.Defaults&&(f=a.Defaults.classes)&&d!==f&&c(f),c(d)),d3.each("title text name visible disabled active value".split(" "),function(g){g in b&&a[g](b[g])}),a.on("click",function(){if(a.disabled()){return !1}}),a.settings=b,a.borderBox=a7(b.border),a.paddingBox=a7(b.padding),a.marginBox=a7(b.margin),b.hidden&&a.hide()},Properties:"parent,name",getContainerElm:function(){var a=fd.getUiContainer(this);return a||fz.getContainer()},getParentCtrl:function(b){for(var a,c=this.getRoot().controlIdLookup;b&&c&&!(a=c[b.id]);){b=b.parentNode}return a},initLayoutRect:function(){var B,G,q,x,b,k,H,E,w,F,D=this,C=D.settings,A=D.getEl();B=D.borderBox=D.borderBox||dh(A,"border"),D.paddingBox=D.paddingBox||dh(A,"padding"),D.marginBox=D.marginBox||dh(A,"margin"),F=fz.getSize(A),E=C.minWidth,w=C.minHeight,b=E||F.width,k=w||F.height,q=C.width,x=C.height,H=void 0!==(H=C.autoResize)?H:!q&&!x,q=q||b,x=x||k;var y=B.left+B.right,v=B.top+B.bottom,z=C.maxWidth||65535,j=C.maxHeight||65535;return D._layoutRect=G={x:C.x||0,y:C.y||0,w:q,h:x,deltaW:y,deltaH:v,contentW:q-y,contentH:x-v,innerW:q-y,innerH:x-v,startMinWidth:E||0,startMinHeight:w||0,minW:Math.min(b,z),minH:Math.min(k,j),maxW:z,maxH:j,autoResize:H,scrollW:0},D._lastLayoutRect={},G},layoutRect:function(h){var d,k,c,g,j,f=this,b=f._layoutRect;return b||(b=f.initLayoutRect()),h?(c=b.deltaW,g=b.deltaH,h.x!==undefined&&(b.x=h.x),h.y!==undefined&&(b.y=h.y),h.minW!==undefined&&(b.minW=h.minW),h.minH!==undefined&&(b.minH=h.minH),(k=h.w)!==undefined&&(k=(k=k<b.minW?b.minW:k)>b.maxW?b.maxW:k,b.w=k,b.innerW=k-c),(k=h.h)!==undefined&&(k=(k=k<b.minH?b.minH:k)>b.maxH?b.maxH:k,b.h=k,b.innerH=k-g),(k=h.innerW)!==undefined&&(k=(k=k<b.minW-c?b.minW-c:k)>b.maxW-c?b.maxW-c:k,b.innerW=k,b.w=k+c),(k=h.innerH)!==undefined&&(k=(k=k<b.minH-g?b.minH-g:k)>b.maxH-g?b.maxH-g:k,b.innerH=k,b.h=k+g),h.contentW!==undefined&&(b.contentW=h.contentW),h.contentH!==undefined&&(b.contentH=h.contentH),(d=f._lastLayoutRect).x===b.x&&d.y===b.y&&d.w===b.w&&d.h===b.h||((j=dH.repaintControls)&&j.map&&!j.map[f._id]&&(j.push(f),j.map[f._id]=!0),d.x=b.x,d.y=b.y,d.w=b.w,d.h=b.h),f):b},repaint:function(){var j,q,f,h,b,d,v,m,g,p,k=this;g=document.createRange?function(a){return a}:Math.round,j=k.getEl().style,h=k._layoutRect,m=k._lastRepaintRect||{},d=(b=k.borderBox).left+b.right,v=b.top+b.bottom,h.x!==m.x&&(j.left=g(h.x)+"px",m.x=h.x),h.y!==m.y&&(j.top=g(h.y)+"px",m.y=h.y),h.w!==m.w&&(p=g(h.w-d),j.width=(0<=p?p:0)+"px",m.w=h.w),h.h!==m.h&&(p=g(h.h-v),j.height=(0<=p?p:0)+"px",m.h=h.h),k._hasBody&&h.innerW!==m.innerW&&(p=g(h.innerW),(f=k.getEl("body"))&&((q=f.style).width=(0<=p?p:0)+"px"),m.innerW=h.innerW),k._hasBody&&h.innerH!==m.innerH&&(p=g(h.innerH),(f=f||k.getEl("body"))&&((q=q||f.style).height=(0<=p?p:0)+"px"),m.innerH=h.innerH),k._lastRepaintRect=m,k.fire("repaint",{},!1)},updateLayoutRect:function(){var a=this;a.parent()._lastRect=null,fz.css(a.getEl(),{width:"",height:""}),a._layoutRect=a._lastRepaintRect=a._lastLayoutRect=null,a.initLayoutRect()},on:function(d,b){var g,a,c,f=this;return cv(f).on(d,"string"!=typeof(g=b)?g:function(h){return a||f.parentsAndSelf().each(function(j){var i=j.settings.callbacks;if(i&&(a=i[g])){return c=j,!1}}),a?a.call(c,h):(h.action=g,void this.fire("execute",h))}),f},off:function(b,a){return cv(this).off(b,a),this},fire:function(c,b,d){if((b=b||{}).control||(b.control=this),b=cv(this).fire(c,b),!1!==d&&this.parent){for(var a=this.parent();a&&!b.isPropagationStopped();){a.fire(c,b,!1),a=a.parent()}}return b},hasEventListeners:function(a){return cv(this).has(a)},parents:function(b){var a,c=new eE;for(a=this.parent();a;a=a.parent()){c.add(a)}return b&&(c=c.filter(b)),c},parentsAndSelf:function(a){return new eE(this).add(this.parents(a))},next:function(){var a=this.parent().items();return a[a.indexOf(this)+1]},prev:function(){var a=this.parent().items();return a[a.indexOf(this)-1]},innerHtml:function(a){return this.$el.html(a),this},getEl:function(b){var a=b?this._id+"-"+b:this._id;return this._elmCache[a]||(this._elmCache[a]=cM("#"+a)[0]),this._elmCache[a]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(a){}return this},blur:function(){return this.getEl().blur(),this},aria:function(c,b){var d=this,a=d.getEl(d.ariaTarget);return void 0===b?d._aria[c]:(d._aria[c]=b,d.state.get("rendered")&&a.setAttribute("role"===c?c:"aria-"+c,b),d)},encode:function(b,a){return !1!==a&&(b=this.translate(b)),(b||"").replace(/[&<>"]/g,function(c){return"&#"+c.charCodeAt(0)+";"})},translate:function(a){return dH.translate?dH.translate(a):a},before:function(b){var a=this.parent();return a&&a.insert(b,a.items().indexOf(this),!0),this},after:function(b){var a=this.parent();return a&&a.insert(b,a.items().indexOf(this)),this},remove:function(){var b,f,h=this,a=h.getEl(),d=h.parent();if(h.items){var g=h.items().toArray();for(f=g.length;f--;){g[f].remove()}}d&&d.items&&(b=[],d.items().each(function(i){i!==h&&b.push(i)}),d.items().set(b),d._lastRect=null),h._eventsRoot&&h._eventsRoot===h&&cM(a).off();var c=h.getRoot().controlIdLookup;return c&&delete c[h._id],a&&a.parentNode&&a.parentNode.removeChild(a),h.state.set("rendered",!1),h.state.destroy(),h.fire("remove"),h},renderBefore:function(a){return cM(a).before(this.renderHtml()),this.postRender(),this},renderTo:function(a){return cM(a||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var h,k,d,g,b,c=this,m=c.settings;for(g in c.$el=cM(c.getEl()),c.state.set("rendered",!0),m){0===g.indexOf("on")&&c.on(g.substr(2),m[g])}if(c._eventsRoot){for(d=c.parent();!b&&d;d=d.parent()){b=d._eventsRoot}if(b){for(g in b._nativeEvents){c._nativeEvents[g]=!0}}}aO(c),m.style&&(h=c.getEl())&&(h.setAttribute("style",m.style),h.style.cssText=m.style),c.settings.border&&(k=c.borderBox,c.$el.css({"border-top-width":k.top,"border-right-width":k.right,"border-bottom-width":k.bottom,"border-left-width":k.left}));var j=c.getRoot();for(var f in j.controlIdLookup||(j.controlIdLookup={}),(j.controlIdLookup[c._id]=c)._aria){c.aria(f,c._aria[f])}!1===c.state.get("visible")&&(c.getEl().style.display="none"),c.bindStates(),c.state.on("change:visible",function(i){var a,l=i.value;c.state.get("rendered")&&(c.getEl().style.display=!1===l?"none":"",c.getEl().getBoundingClientRect()),(a=c.parent())&&(a._lastRect=null),c.fire(l?"show":"hide"),cY.add(c)}),c.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(h){var m,d,g,b,c,p,j=this.getEl(),f=j.parentNode,k=function(q,l){var s,a,o=q;for(s=a=0;o&&o!==l&&o.nodeType;){s+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent}return{x:s,y:a}}(j,f);return m=k.x,d=k.y,g=j.offsetWidth,b=j.offsetHeight,c=f.clientWidth,p=f.clientHeight,"end"===h?(m-=c-g,d-=p-b):"center"===h&&(m-=c/2-g/2,d-=p/2-b/2),f.scrollLeft=m,f.scrollTop=d,this},getRoot:function(){for(var c,b=this,d=[];b;){if(b.rootControl){c=b.rootControl;break}d.push(b),b=(c=b).parent()}c||(c=this);for(var a=d.length;a--;){d[a].rootControl=c}return c},reflow:function(){cY.remove(this);var a=this.parent();return a&&a._layout&&!a._layout.isNative()&&a.reflow(),this}};function cv(a){return a._eventDispatcher||(a._eventDispatcher=new bo({scope:a,toggleEvent:function(c,b){b&&bo.isNative(c)&&(a._nativeEvents||(a._nativeEvents={}),a._nativeEvents[c]=!0,a.state.get("rendered")&&aO(a))}})),a._eventDispatcher}function aO(q){var k,w,g,h,j,b;function f(c){var a=q.getParentCtrl(c.target);a&&a.fire(c.type,c)}function x(){var a=h._lastHoverCtrl;a&&(a.fire("mouseleave",{target:a.getEl()}),a.parents().each(function(c){c.fire("mouseleave",{target:c.getEl()})}),h._lastHoverCtrl=null)}function v(u){var c,z,a,l=q.getParentCtrl(u.target),y=h._lastHoverCtrl,d=0;if(l!==y){if((z=(h._lastHoverCtrl=l).parents().toArray().reverse()).push(l),y){for((a=y.parents().toArray().reverse()).push(y),d=0;d<a.length&&z[d]===a[d];d++){}for(c=a.length-1;d<=c;c--){(y=a[c]).fire("mouseleave",{target:y.getEl()})}}for(c=d;c<z.length;c++){(l=z[c]).fire("mouseenter",{target:l.getEl()})}}}function p(a){a.preventDefault(),"mousewheel"===a.type?(a.deltaY=-0.025*a.wheelDelta,a.wheelDeltaX&&(a.deltaX=-0.025*a.wheelDeltaX)):(a.deltaX=0,a.deltaY=a.detail),a=q.fire("wheel",a)}if(j=q._nativeEvents){for((g=q.parents().toArray()).unshift(q),k=0,w=g.length;!h&&k<w;k++){h=g[k]._eventsRoot}for(h||(h=g[g.length-1]||q),q._eventsRoot=h,w=k,k=0;k<w;k++){g[k]._eventsRoot=h}var m=h._delegates;for(b in m||(m=h._delegates={}),j){if(!j){return !1}"wheel"!==b||bS?("mouseenter"===b||"mouseleave"===b?h._hasMouseEnter||(cM(h.getEl()).on("mouseleave",x).on("mouseover",v),h._hasMouseEnter=1):m[b]||(cM(h.getEl()).on(b,f),m[b]=!0),j[b]=!1):bp?cM(q.getEl()).on("mousewheel",p):cM(q.getEl()).on("DOMMouseScroll",p)}}}d3.each("text title visible disabled active value".split(" "),function(a){fk[a]=function(b){return 0===arguments.length?this.state.get(a):(void 0!==b&&this.state.set(a,b),this)}});var d6=dH=aN.extend(fk),dR=function(a){return !!a.getAttribute("data-mce-tabstop")};function dx(J){var B,z,C=J.root;function F(a){return a&&1===a.nodeType}try{B=document.activeElement}catch(w){B=document.body}function x(a){return F(a=a||B)?a.getAttribute("role"):null}function N(b){for(var a,c=b||B;c=c.parentNode;){if(a=x(c)){return a}}}function E(b){var a=B;if(F(a)){return a.getAttribute("aria-"+b)}}function q(b){var a=b.tagName.toUpperCase();return"INPUT"===a||"TEXTAREA"===a||"SELECT"===a}function L(a){var b=[];return function c(e){if(1===e.nodeType&&"none"!==e.style.display&&!e.disabled){var f;(q(f=e)&&!f.hidden||dR(f)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(x(f)))&&b.push(e);for(var d=0;d<e.childNodes.length;d++){c(e.childNodes[d])}}}(a||C.getEl()),b}function K(c){var b,d;(d=(c=c||z).parents().toArray()).unshift(c);for(var a=0;a<d.length&&!(b=d[a]).settings.ariaRoot;a++){}return b}function I(b,a){return b<0?b=a.length-1:b>=a.length&&(b=0),a[b]&&a[b].focus(),b}function G(d,b){var f=-1,a=K();b=b||L(a.getEl());for(var c=0;c<b.length;c++){b[c]===B&&(f=c)}f+=d,a.lastAriaIndex=I(f,b)}function D(){"tablist"===N()?G(-1,L(B.parentNode)):z.parent().submenu?M():G(-1)}function H(){var b=x(),a=N();"tablist"===a?G(1,L(B.parentNode)):"menuitem"===b&&"menu"===a&&E("haspopup")?j():G(1)}function A(){G(-1)}function k(){var b=x(),a=N();"menuitem"===b&&"menubar"===a?j():"button"===b&&E("haspopup")?j({key:"down"}):G(1)}function M(){z.fire("cancel")}function j(a){a=a||{},z.fire("click",{target:B,aria:a})}return z=C.getParentCtrl(B),C.on("keydown",function(b){function a(d,c){q(B)||dR(B)||"slider"!==x(B)&&!1!==c(d)&&d.preventDefault()}if(!b.isDefaultPrevented()){switch(b.keyCode){case 37:a(b,D);break;case 39:a(b,H);break;case 38:a(b,A);break;case 40:a(b,k);break;case 27:M();break;case 14:case 13:case 32:a(b,j);break;case 9:!function(d){if("tablist"===N()){var c=L(z.getEl("body"))[0];c&&c.focus()}else{G(d.shiftKey?-1:1)}}(b),b.preventDefault()}}}),C.on("focusin",function(a){B=a.target,z=a.control}),{focusFirst:function(b){var a=K(b),c=L(a.getEl());a.settings.ariaRemember&&"lastAriaIndex" in a?I(a.lastAriaIndex,c):I(0,c)}}}var c7={},ch=d6.extend({init:function(b){var a=this;a._super(b),(b=a.settings).fixed&&a.state.set("fixed",!0),a._items=new eE,a.isRtl()&&a.classes.add("rtl"),a.bodyClasses=new dQ(function(){a.state.get("rendered")&&(a.getEl("body").className=this.toString())}),a.bodyClasses.prefix=a.classPrefix,a.classes.add("container"),a.bodyClasses.add("container-body"),b.containerCls&&a.classes.add(b.containerCls),a._layout=d4.create((b.layout||"")+"layout"),a.settings.items?a.add(a.settings.items):a.add(a.render()),a._hasBody=!0},items:function(){return this._items},find:function(a){return(a=c7[a]=c7[a]||new bz(a)).find(this)},add:function(a){return this.items().add(this.create(a)).parent(this),this},focus:function(d){var b,f,a,c=this;if(!d||!(f=c.keyboardNav||c.parents().eq(-1)[0].keyboardNav)){return a=c.find("*"),c.statusbar&&a.add(c.statusbar.items()),a.each(function(g){if(g.settings.autofocus){return b=null,!1}g.canFocus&&(b=b||g)}),b&&b.focus(),c}f.focusFirst(c)},replace:function(d,b){for(var f,a=this.items(),c=a.length;c--;){if(a[c]===d){a[c]=b;break}}0<=c&&((f=b.getEl())&&f.parentNode.removeChild(f),(f=d.getEl())&&f.parentNode.removeChild(f)),b.parent(this)},create:function(c){var b,d=this,a=[];return d3.isArray(c)||(c=[c]),d3.each(c,function(f){f&&(f instanceof d6||("string"==typeof f&&(f={type:f}),b=d3.extend({},d.settings.defaults,f),f.type=b.type=b.type||f.type||d.settings.defaultType||(b.defaults?b.defaults.type:null),f=d4.create(b)),a.push(f))}),a},renderNew:function(){var a=this;return a.items().each(function(c,b){var d;c.parent(a),c.state.get("rendered")||((d=a.getEl("body")).hasChildNodes()&&b<=d.childNodes.length-1?cM(d.childNodes[b]).before(c.renderHtml()):cM(d).append(c.renderHtml()),c.postRender(),cY.add(c))}),a._layout.applyClasses(a.items().filter(":visible")),a._lastRect=null,a},append:function(a){return this.add(a).renderNew()},prepend:function(a){return this.items().set(this.create(a).concat(this.items().toArray())),this.renderNew()},insert:function(d,b,g){var a,c,f;return d=this.create(d),a=this.items(),!g&&b<a.length-1&&(b+=1),0<=b&&b<a.length&&(c=a.slice(0,b).toArray(),f=a.slice(b).toArray(),a.set(c.concat(d,f))),this.renderNew()},fromJSON:function(b){for(var a in b){this.find("#"+a).value(b[a])}return this},toJSON:function(){var a={};return this.find("*").each(function(c){var b=c.name(),d=c.value();b&&void 0!==d&&(a[b]=d)}),a},renderHtml:function(){var b=this,a=b._layout,c=this.settings.role;return b.preRender(),a.preRender(b),'<div id="'+b._id+'" class="'+b.classes+'"'+(c?' role="'+this.settings.role+'"':"")+'><div id="'+b._id+'-body" class="'+b.bodyClasses+'">'+(b.settings.html||"")+a.renderHtml(b)+"</div></div>"},postRender:function(){var b,a=this;return a.items().exec("postRender"),a._super(),a._layout.postRender(a),a.state.set("rendered",!0),a.settings.style&&a.$el.css(a.settings.style),a.settings.border&&(b=a.borderBox,a.$el.css({"border-top-width":b.top,"border-right-width":b.right,"border-bottom-width":b.bottom,"border-left-width":b.left})),a.parent()||(a.keyboardNav=dx({root:a})),a},initLayoutRect:function(){var a=this._super();return this._layout.recalc(this),a},recalc:function(){var b=this,a=b._layoutRect,c=b._lastRect;if(!c||c.w!==a.w||c.h!==a.h){return b._layout.recalc(b),a=b.layoutRect(),b._lastRect={x:a.x,y:a.y,w:a.w,h:a.h},!0}},reflow:function(){var a;if(cY.remove(this),this.visible()){for(d6.repaintControls=[],d6.repaintControls.map={},this.recalc(),a=d6.repaintControls.length;a--;){d6.repaintControls[a].repaint()}"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),d6.repaintControls=[]}return this}});function dj(b){var a,c;if(b.changedTouches){for(a="screenX screenY pageX pageY clientX clientY".split(" "),c=0;c<a.length;c++){b[a[c]]=b.changedTouches[0][a[c]]}}}function bI(i,d){var c,f,q,a,o,k,j,l=d.document||document;d=d||{};var n=l.getElementById(d.handle||i);q=function(w){var B,h,p,b,g,C,z,m,A,y,x,v=(B=l,A=Math.max,h=B.documentElement,p=B.body,b=A(h.scrollWidth,p.scrollWidth),g=A(h.clientWidth,p.clientWidth),C=A(h.offsetWidth,p.offsetWidth),z=A(h.scrollHeight,p.scrollHeight),m=A(h.clientHeight,p.clientHeight),{width:b<C?g:b,height:z<A(h.offsetHeight,p.offsetHeight)?m:z});dj(w),w.preventDefault(),f=w.button,y=n,k=w.screenX,j=w.screenY,x=window.getComputedStyle?window.getComputedStyle(y,null).getPropertyValue("cursor"):y.runtimeStyle.cursor,c=cM("<div></div>").css({position:"absolute",top:0,left:0,width:v.width,height:v.height,zIndex:2147483647,opacity:0.0001,cursor:x}).appendTo(l.body),cM(l).on("mousemove touchmove",o).on("mouseup touchend",a),d.start(w)},o=function(b){if(dj(b),b.button!==f){return a(b)}b.deltaX=b.screenX-k,b.deltaY=b.screenY-j,b.preventDefault(),d.drag(b)},a=function(b){dj(b),cM(l).off("mousemove touchmove",o).off("mouseup touchend",a),c.remove(),d.stop&&d.stop(b)},this.destroy=function(){cM(n).off()},cM(n).on("mousedown touchstart",q)}var aE,eK,fA,fJ,au={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var a=this;function b(){var c,f,h;function d(w,B,k,p,g,j){var C,z,m,A,y,x,v,q;if(z=a.getEl("scroll"+w)){if(v=B.toLowerCase(),q=k.toLowerCase(),cM(a.getEl("absend")).css(v,a.layoutRect()[p]-1),!g){return void cM(z).css("display","none")}cM(z).css("display","block"),C=a.getEl("body"),m=a.getEl("scroll"+w+"t"),A=C["client"+k]-4,y=(A-=c&&f?z["client"+j]:0)/C["scroll"+k],(x={})[v]=C["offset"+B]+2,x[q]=A,cM(z).css(x),(x={})[v]=C["scroll"+B]*y,x[q]=A*y,cM(m).css(x)}}h=a.getEl("body"),c=h.scrollWidth>h.clientWidth,f=h.scrollHeight>h.clientHeight,d("h","Left","Width","contentW",c,"Height"),d("v","Top","Height","contentH",f,"Width")}a.settings.autoScroll&&(a._hasScroll||(a._hasScroll=!0,function(){function c(j,g,f,h,n){var m,k=a._id+"-scroll"+j,i=a.classPrefix;cM(a.getEl()).append('<div id="'+k+'" class="'+i+"scrollbar "+i+"scrollbar-"+j+'"><div id="'+k+'t" class="'+i+'scrollbar-thumb"></div></div>'),a.draghelper=new bI(k+"t",{start:function(){m=a.getEl("body")["scroll"+g],cM("#"+k).addClass(i+"active")},drag:function(q){var l,u,d,p,s=a.layoutRect();u=s.contentW>s.innerW,d=s.contentH>s.innerH,p=a.getEl("body")["client"+f]-4,l=(p-=u&&d?a.getEl("scroll"+j)["client"+n]:0)/a.getEl("body")["scroll"+f],a.getEl("body")["scroll"+g]=m+q["delta"+h]/l},stop:function(){cM("#"+k).removeClass(i+"active")}})}a.classes.add("scroll"),c("v","Top","Height","Y","Width"),c("h","Left","Width","X","Height")}(),a.on("wheel",function(d){var c=a.getEl("body");c.scrollLeft+=10*(d.deltaX||0),c.scrollTop+=10*d.deltaY,b()}),cM(a.getEl("body")).on("scroll",b)),b())}},ac=ch.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[au],renderHtml:function(){var b=this,a=b._layout,c=b.settings.html;return b.preRender(),a.preRender(b),void 0===c?c='<div id="'+b._id+'-body" class="'+b.bodyClasses+'">'+a.renderHtml(b)+"</div>":("function"==typeof c&&(c=c.call(b)),b._hasBody=!1),'<div id="'+b._id+'" class="'+b.classes+'" hidefocus="1" tabindex="-1" role="group">'+(b._preBodyHtml||"")+c+"</div>"}}),cI={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(b,a){if(b<=1||a<=1){var c=fz.getWindowSize();b=b<=1?b*c.w:b,a=a<=1?a*c.h:a}return this._layoutRect.autoResize=!1,this.layoutRect({minW:b,minH:a,w:b,h:a}).reflow()},resizeBy:function(b,a){var c=this.layoutRect();return this.resizeTo(c.w+b,c.h+a)}},aT=[],cF=[];function az(b,a){for(;b;){if(b===a){return !0}b=b.parent()}}function fq(){aE||(aE=function(a){2!==a.button&&function(d){for(var c=aT.length;c--;){var f=aT[c],b=f.getParentCtrl(d.target);if(f.settings.autohide){if(b&&(az(b,f)||f.parent()===b)){continue}(d=f.fire("autohide",{target:d.target})).isDefaultPrevented()||f.hide()}}}(a)},cM(document).on("click touchstart",aE))}function cy(b){var c=fz.getViewPort().y;function a(g,f){for(var h,d=0;d<aT.length;d++){if(aT[d]!==b){for(h=aT[d].parent();h&&(h=h.parent());){h===b&&aT[d].fixed(g).moveBy(0,f).repaint()}}}}b.settings.autofix&&(b.state.get("fixed")?b._autoFixY>c&&(b.fixed(!1).layoutRect({y:b._autoFixY}).repaint(),a(!1,b._autoFixY-c)):(b._autoFixY=b.layoutRect().y,b._autoFixY<c&&(b.fixed(!0).layoutRect({y:0}).repaint(),a(!0,c-b._autoFixY))))}function dA(d,b){var g,a,c=cl.zIndex||65535;if(d){cF.push(b)}else{for(g=cF.length;g--;){cF[g]===b&&cF.splice(g,1)}}if(cF.length){for(g=0;g<cF.length;g++){cF[g].modal&&(c++,a=cF[g]),cF[g].getEl().style.zIndex=c,cF[g].zIndex=c,c++}}var f=cM("#"+b.classPrefix+"modal-block",b.getContainerElm())[0];a?cM(f).css("z-index",a.zIndex-1):f&&(f.parentNode.removeChild(f),fJ=!1),cl.currentZIndex=c}var cl=ac.extend({Mixins:[dw,cI],init:function(b){var a=this;a._super(b),(a._eventsRoot=a).classes.add("floatpanel"),b.autohide&&(fq(),function(){if(!fA){var d=document.documentElement,c=d.clientWidth,f=d.clientHeight;fA=function(){document.all&&c===d.clientWidth&&f===d.clientHeight||(c=d.clientWidth,f=d.clientHeight,cl.hideAll())},cM(window).on("resize",fA)}}(),aT.push(a)),b.autofix&&(eK||(eK=function(){var c;for(c=aT.length;c--;){cy(aT[c])}},cM(window).on("scroll",eK)),a.on("move",function(){cy(this)})),a.on("postrender show",function(d){if(d.control===a){var c,f=a.classPrefix;a.modal&&!fJ&&((c=cM("#"+f+"modal-block",a.getContainerElm()))[0]||(c=cM('<div id="'+f+'modal-block" class="'+f+"reset "+f+'fade"></div>').appendTo(a.getContainerElm())),d5.setTimeout(function(){c.addClass(f+"in"),cM(a.getEl()).addClass(f+"in")}),fJ=!0),dA(!0,a)}}),a.on("show",function(){a.parents().each(function(c){if(c.state.get("fixed")){return a.fixed(!0),!1}})}),b.popover&&(a._preBodyHtml='<div class="'+a.classPrefix+'arrow"></div>',a.classes.add("popover").add("bottom").add(a.isRtl()?"end":"start")),a.aria("label",b.ariaLabel),a.aria("labelledby",a._id),a.aria("describedby",a.describedBy||a._id+"-none")},fixed:function(b){var a=this;if(a.state.get("fixed")!==b){if(a.state.get("rendered")){var c=fz.getViewPort();b?a.layoutRect().y-=c.y:a.layoutRect().y+=c.y}a.classes.toggle("fixed",b),a.state.set("fixed",b)}return a},show:function(){var b,a=this._super();for(b=aT.length;b--&&aT[b]!==this;){}return -1===b&&aT.push(this),a},hide:function(){return c0(this),dA(!1,this),this._super()},hideAll:function(){cl.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),dA(!1,this)),this},remove:function(){c0(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function c0(b){var a;for(a=aT.length;a--;){aT[a]===b&&aT.splice(a,1)}for(a=cF.length;a--;){cF[a]===b&&cF.splice(a,1)}}cl.hideAll=function(){for(var b=aT.length;b--;){var a=aT[b];a&&a.settings.autohide&&(a.hide(),aT.splice(b,1))}};var bL=function(b,a){return !(!b||a.settings.ui_container)},dm=function(v,j,q){var m,f,g=ec.DOM,h=v.getParam("fixed_toolbar_container");h&&(f=g.select(h)[0]);var b=function(){if(m&&m.moveRel&&m.visible()&&!m._fixed){var s=v.selection.getScrollContainer(),c=v.getBody(),w=0,a=0;if(s){var l=g.getPos(c),u=g.getPos(s);w=Math.max(0,u.x-l.x),a=Math.max(0,u.y-l.y)}m.fixed(!1).moveRel(c,v.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(w,a)}},d=function(){m&&(m.show(),b(),g.addClass(v.getBody(),"mce-edit-focus"))},p=function(){m&&(m.hide(),cl.hideAll(),g.removeClass(v.getBody(),"mce-edit-focus"))},k=function(){m?m.visible()||d():(m=j.panel=d4.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:bL(f,v),fixed:bL(f,v),border:1,items:[!1===ey(v)?null:{type:"menubar",border:"0 0 1 0",items:ew(v)},d0(v,ev(v))]}),fd.setUiContainer(v,m),d2(v),f?m.renderTo(f).reflow():m.renderTo().reflow(),eD(v,m),d(),eJ(v),v.on("nodeChange",b),v.on("ResizeWindow",b),v.on("activate",d),v.on("deactivate",p),v.nodeChanged())};return v.settings.content_editable=!0,v.on("focus",function(){!1===eh(v)&&q.skinUiCss?g.styleSheetLoader.load(q.skinUiCss,k,k):k()}),v.on("blur hide",p),v.on("remove",function(){m&&(m.remove(),m=null)}),!1===eh(v)&&q.skinUiCss?g.styleSheetLoader.load(q.skinUiCss,ay(v)):ay(v)(),{}};function aJ(d,f){var g,e,c=this,b=d6.classPrefix;c.show=function(h,a){function i(){g&&(cM(d).append('<div class="'+b+"throbber"+(f?" "+b+"throbber-inline":"")+'"></div>'),a&&a())}return c.hide(),g=!0,h?e=d5.setTimeout(i,h):i(),c},c.hide=function(){var a=d.lastChild;return d5.clearTimeout(e),a&&-1!==a.className.indexOf("throbber")&&a.parentNode.removeChild(a),g=!1,c}}var bg=function(b,a){var c;b.on("ProgressState",function(d){c=c||new aJ(a.panel.getEl("body")),d.state?c.show(d.time):c.hide()})},a3=function(c,b,d){var a=function(j){var g=j.settings,k=g.skin,f=g.skin_url;if(!1!==k){var h=k||"lightgray";f=f?j.documentBaseURI.toAbsolute(f):ek.baseURL+"/skins/"+h}return f}(c);return a&&(d.skinUiCss=a+"/skin.min.css",c.contentCSS.push(a+"/content"+(c.inline?".inline":"")+".min.css")),bg(c,b),c.getParam("inline",!1,"boolean")?dm(c,b,d):aX(c,b,d)},da=d6.extend({Mixins:[dw],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var b=this,a=b.classPrefix;return'<div id="'+b._id+'" class="'+b.classes+'" role="presentation"><div class="'+a+'tooltip-arrow"></div><div class="'+a+'tooltip-inner">'+b.encode(b.state.get("text"))+"</div></div>"},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl().lastChild.innerHTML=a.encode(b.value)}),a._super()},repaint:function(){var b,a;b=this.getEl().style,a=this._layoutRect,b.left=a.x+"px",b.top=a.y+"px",b.zIndex=131070}}),fg=d6.extend({init:function(a){var b=this;b._super(a),a=b.settings,b.canFocus=!0,a.tooltip&&!1!==fg.tooltips&&(b.on("mouseenter",function(d){var c=b.tooltip().moveTo(-65535);if(d.control===b){var f=c.text(a.tooltip).show().testMoveRel(b.getEl(),["bc-tc","bc-tl","bc-tr"]);c.classes.toggle("tooltip-n","bc-tc"===f),c.classes.toggle("tooltip-nw","bc-tl"===f),c.classes.toggle("tooltip-ne","bc-tr"===f),c.moveRel(b.getEl(),f)}else{c.hide()}}),b.on("mouseleave mousedown click",function(){b.tooltip().remove(),b._tooltip=null})),b.aria("label",a.ariaLabel||a.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new da({type:"tooltip"}),fd.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var b=this,a=b.settings;b._super(),b.parent()||!a.width&&!a.height||(b.initLayoutRect(),b.repaint()),a.autofocus&&b.focus()},bindStates:function(){var b=this;function c(d){b.aria("disabled",d),b.classes.toggle("disabled",d)}function a(d){b.aria("pressed",d),b.classes.toggle("active",d)}return b.state.on("change:disabled",function(d){c(d.value)}),b.state.on("change:active",function(d){a(d.value)}),b.state.get("disabled")&&c(!0),b.state.get("active")&&a(!0),b._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),dK=fg.extend({Defaults:{value:0},init:function(a){this._super(a),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(b){return Math.round(b)})},renderHtml:function(){var b=this._id,a=this.classPrefix;return'<div id="'+b+'" class="'+this.classes+'"><div class="'+a+'bar-container"><div class="'+a+'bar"></div></div><div class="'+a+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var a=this;function b(c){c=a.settings.filter(c),a.getEl().lastChild.innerHTML=c+"%",a.getEl().firstChild.firstChild.style.width=c+"%"}return a.state.on("change:value",function(c){b(c.value)}),b(a.state.get("value")),a._super()}}),eV=function(b,a){b.getEl().lastChild.textContent=a+(b.progressBar?" "+b.progressBar.value()+"%":"")},aj=d6.extend({Mixins:[dw],Defaults:{classes:"widget notification"},init:function(b){var a=this;a._super(b),a.maxWidth=b.maxWidth,b.text&&a.text(b.text),b.icon&&(a.icon=b.icon),b.color&&(a.color=b.color),b.type&&a.classes.add("notification-"+b.type),b.timeout&&(b.timeout<0||0<b.timeout)&&!b.closeButton?a.closeButton=!1:(a.classes.add("has-close"),a.closeButton=!0),b.progressBar&&(a.progressBar=new dK),a.on("click",function(c){-1!==c.target.className.indexOf(a.classPrefix+"close")&&a.close()})},renderHtml:function(){var d,b=this,g=b.classPrefix,a="",c="",f="";return b.icon&&(a='<i class="'+g+"ico "+g+"i-"+b.icon+'"></i>'),d=' style="max-width: '+b.maxWidth+"px;"+(b.color?"background-color: "+b.color+';"':'"'),b.closeButton&&(c='<button type="button" class="'+g+'close" aria-hidden="true">\xd7</button>'),b.progressBar&&(f=b.progressBar.renderHtml()),'<div id="'+b._id+'" class="'+b.classes+'"'+d+' role="presentation">'+a+'<div class="'+g+'notification-inner">'+b.state.get("text")+"</div>"+f+c+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var a=this;return d5.setTimeout(function(){a.$el.addClass(a.classPrefix+"in"),eV(a,a.state.get("text"))},100),a._super()},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl().firstChild.innerHTML=b.value,eV(a,b.value)}),a.progressBar&&(a.progressBar.bindStates(),a.progressBar.state.on("change:value",function(b){eV(a,a.state.get("text"))})),a._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var b,a;b=this.getEl().style,a=this._layoutRect,b.left=a.x+"px",b.top=a.y+"px",b.zIndex=65534}});function b9(b){var a=function(c){return c.inline?c.getElement():c.getContentAreaContainer()};return{open:function(g,d){var h,c=d3.extend(g,{maxWidth:(h=a(b),fz.getSize(h).width)}),f=new aj(c);return 0<(f.args=c).timeout&&(f.timer=setTimeout(function(){f.close(),d()},c.timeout)),f.on("close",function(){d()}),f.renderTo(),f},close:function(c){c.close()},reposition:function(d){var c;c=d,bZ.each(c,function(f){f.moveTo(0,0)}),function(h){if(0<h.length){var g=h.slice(0,1)[0],f=a(b);g.moveRel(f,"tc-tc"),bZ.each(h,function(j,i){0<i&&j.moveRel(h[i-1].getEl(),"bc-tc")})}}(d)},getArgs:function(c){return c.args}}}var bV=[],cP="";function bA(b){var a,c=cM("meta[name=viewport]")[0];!1!==bP.overrideViewPort&&(c||((c=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(c)),(a=c.getAttribute("content"))&&void 0!==cP&&(cP=a),c.setAttribute("content",b?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":cP))}function bu(b,a){(function(){for(var c=0;c<bV.length;c++){if(bV[c]._fullscreen){return !0}}return !1})()&&!1===a&&cM([document.documentElement,document.body]).removeClass(b+"fullscreen")}var b2=cl.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(a){var b=this;b._super(a),b.isRtl()&&b.classes.add("rtl"),b.classes.add("window"),b.bodyClasses.add("window-body"),b.state.set("fixed",!0),a.buttons&&(b.statusbar=new ac({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:b.isRtl()?"start":"end",defaults:{type:"button"},items:a.buttons}),b.statusbar.classes.add("foot"),b.statusbar.parent(b)),b.on("click",function(d){var c=b.classPrefix+"close";(fz.hasClass(d.target,c)||fz.hasClass(d.target.parentNode,c))&&b.close()}),b.on("cancel",function(){b.close()}),b.on("move",function(c){c.control===b&&cl.hideAll()}),b.aria("describedby",b.describedBy||b._id+"-none"),b.aria("label",a.title),b._fullscreen=!1},recalc:function(){var d,b,g,a,c=this,f=c.statusbar;c._fullscreen&&(c.layoutRect(fz.getWindowSize()),c.layoutRect().contentH=c.layoutRect().innerH),c._super(),d=c.layoutRect(),c.settings.title&&!c._fullscreen&&(b=d.headerW)>d.w&&(g=d.x-Math.max(0,b/2),c.layoutRect({w:b,x:g}),a=!0),f&&(f.layoutRect({w:c.layoutRect().innerW}).recalc(),(b=f.layoutRect().minW+d.deltaW)>d.w&&(g=d.x-Math.max(0,b-d.w),c.layoutRect({w:b,x:g}),a=!0)),a&&c.recalc()},initLayoutRect:function(){var d,b=this,g=b._super(),a=0;if(b.settings.title&&!b._fullscreen){d=b.getEl("head");var c=fz.getSize(d);g.headerW=c.width,g.headerH=c.height,a+=g.headerH}b.statusbar&&(a+=b.statusbar.layoutRect().h),g.deltaH+=a,g.minH+=a,g.h+=a;var f=fz.getWindowSize();return g.x=b.settings.x||Math.max(0,f.w/2-g.w/2),g.y=b.settings.y||Math.max(0,f.h/2-g.h/2),g},renderHtml:function(){var h=this,d=h._layout,k=h._id,c=h.classPrefix,g=h.settings,j="",f="",b=g.html;return h.preRender(),d.preRender(h),g.title&&(j='<div id="'+k+'-head" class="'+c+'window-head"><div id="'+k+'-title" class="'+c+'title">'+h.encode(g.title)+'</div><div id="'+k+'-dragh" class="'+c+'dragh"></div><button type="button" class="'+c+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),g.url&&(b='<iframe src="'+g.url+'" tabindex="-1"></iframe>'),void 0===b&&(b=d.renderHtml(h)),h.statusbar&&(f=h.statusbar.renderHtml()),'<div id="'+k+'" class="'+h.classes+'" hidefocus="1"><div class="'+h.classPrefix+'reset" role="application">'+j+'<div id="'+k+'-body" class="'+h.bodyClasses+'">'+b+"</div>"+f+"</div></div>"},fullscreen:function(f){var h,b,a=this,d=document.documentElement,g=a.classPrefix;if(f!==a._fullscreen){if(cM(window).on("resize",function(){var j;if(a._fullscreen){if(h){a._timer||(a._timer=d5.setTimeout(function(){var k=fz.getWindowSize();a.moveTo(0,0).resizeTo(k.w,k.h),a._timer=0},50))}else{j=(new Date).getTime();var i=fz.getWindowSize();a.moveTo(0,0).resizeTo(i.w,i.h),50<(new Date).getTime()-j&&(h=!0)}}}),b=a.layoutRect(),a._fullscreen=f){a._initial={x:b.x,y:b.y,w:b.w,h:b.h},a.borderBox=a7("0"),a.getEl("head").style.display="none",b.deltaH-=b.headerH+2,cM([d,document.body]).addClass(g+"fullscreen"),a.classes.add("fullscreen");var c=fz.getWindowSize();a.moveTo(0,0).resizeTo(c.w,c.h)}else{a.borderBox=a7(a.settings.border),a.getEl("head").style.display="",b.deltaH+=b.headerH,cM([d,document.body]).removeClass(g+"fullscreen"),a.classes.remove("fullscreen"),a.moveTo(a._initial.x,a._initial.y).resizeTo(a._initial.w,a._initial.h)}}return a.reflow()},postRender:function(){var a,b=this;setTimeout(function(){b.classes.add("in"),b.fire("open")},0),b._super(),b.statusbar&&b.statusbar.postRender(),b.focus(),this.dragHelper=new bI(b._id+"-dragh",{start:function(){a={x:b.layoutRect().x,y:b.layoutRect().y}},drag:function(c){b.moveTo(a.x+c.deltaX,a.y+c.deltaY)}}),b.on("submit",function(c){c.isDefaultPrevented()||b.close()}),bV.push(b),bA(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var b,a=this;for(a.dragHelper.destroy(),a._super(),a.statusbar&&this.statusbar.remove(),bu(a.classPrefix,!1),b=bV.length;b--;){bV[b]===a&&bV.splice(b,1)}bA(0<bV.length)},getContentWindow:function(){var a=this.getEl().getElementsByTagName("iframe")[0];return a?a.contentWindow:null}});!function(){if(!bP.desktop){var a={w:window.innerWidth,h:window.innerHeight};d5.setInterval(function(){var c=window.innerWidth,b=window.innerHeight;a.w===c&&a.h===b||(a={w:c,h:b},cM(window).trigger("resize"))},100)}cM(window).on("resize",function(){var c,b,d=fz.getWindowSize();for(c=0;c<bV.length;c++){b=bV[c].layoutRect(),bV[c].moveTo(bV[c].settings.x||Math.max(0,d.w/2-b.w/2),bV[c].settings.y||Math.max(0,d.h/2-b.h/2))}})}();var bC,ej=b2.extend({init:function(a){a={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(a)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(c){var b,a=c.callback||function(){};function d(g,f,h){return{type:"button",text:g,subtype:h?"primary":"",onClick:function(i){i.control.parents()[1].close(),a(f)}}}switch(c.buttons){case ej.OK_CANCEL:b=[d("Ok",!0,!0),d("Cancel",!1)];break;case ej.YES_NO:case ej.YES_NO_CANCEL:b=[d("Yes",1,!0),d("No",0)],c.buttons===ej.YES_NO_CANCEL&&b.push(d("Cancel",-1));break;default:b=[d("Ok",!0,!0)]}return new b2({padding:20,x:c.x,y:c.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:b,title:c.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:c.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:c.onClose,onCancel:function(){a(!1)}}).renderTo(document.body).reflow()},alert:function(b,a){return"string"==typeof b&&(b={text:b}),b.callback=a,ej.msgBox(b)},confirm:function(b,a){return"string"==typeof b&&(b={text:b}),b.callback=a,b.buttons=ej.OK_CANCEL,ej.msgBox(b)}}}),fF=function(a){return{renderUI:function(b){return a3(a,this,b)},resizeTo:function(c,b){return cq(a,c,b)},resizeBy:function(c,b){return du(a,c,b)},getNotificationManagerImpl:function(){return b9(a)},getWindowManagerImpl:function(){return{open:function(f,d,c){var b;return f.title=f.title||" ",f.url=f.url||f.file,f.url&&(f.width=parseInt(f.width||320,10),f.height=parseInt(f.height||240,10)),f.body&&(f.items={defaults:f.defaults,type:f.bodyType||"form",items:f.body,data:f.data,callbacks:f.commands}),f.url||f.buttons||(f.buttons=[{text:"Ok",subtype:"primary",onclick:function(){b.find("form")[0].submit()}},{text:"Cancel",onclick:function(){b.close()}}]),(b=new b2(f)).on("close",function(){c(b)}),f.data&&b.on("postRender",function(){this.find("*").each(function(h){var g=h.name();g in f.data&&h.value(f.data[g])})}),b.features=f||{},b.params=d||{},b=b.renderTo(document.body).reflow()},alert:function(d,c,f){var b;return(b=ej.alert(d,function(){c()})).on("close",function(){f(b)}),b},confirm:function(d,c,f){var b;return(b=ej.confirm(d,function(g){c(g)})).on("close",function(){f(b)}),b},close:function(b){b.close()},getParams:function(b){return b.params},setParams:function(c,b){c.params=b}}}}},dU=aN.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(a){this.settings=d3.extend({},this.Defaults,a)},preRender:function(a){a.bodyClasses.add(this.settings.containerClass)},applyClasses:function(d){var b,g,a,c,f=this.settings;b=f.firstControlClass,g=f.lastControlClass,d.each(function(h){h.classes.remove(b).remove(g).add(f.controlClass),h.visible()&&(a||(a=h),c=h)}),a&&a.classes.add(b),c&&c.classes.add(g)},renderHtml:function(b){var a="";return this.applyClasses(b.items()),b.items().each(function(c){a+=c.renderHtml()}),a},recalc:function(){},postRender:function(){},isNative:function(){return !1}}),bb=dU.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(a){a.items().filter(":visible").each(function(c){var b=c.settings;c.layoutRect({x:b.x,y:b.y,w:b.w,h:b.h}),c.recalc&&c.recalc()})},renderHtml:function(a){return'<div id="'+a._id+'-absend" class="'+a.classPrefix+'abs-end"></div>'+this._super(a)}}),cS=fg.extend({Defaults:{classes:"widget btn",role:"button"},init:function(b){var a,c=this;c._super(b),b=c.settings,a=c.settings.size,c.on("click mousedown",function(d){d.preventDefault()}),c.on("touchstart",function(d){c.fire("click",d),d.preventDefault()}),b.subtype&&c.classes.add(b.subtype),a&&c.classes.add("btn-"+a),b.icon&&c.icon(b.icon)},icon:function(a){return arguments.length?(this.state.set("icon",a),this):this.state.get("icon")},repaint:function(){var b,a=this.getEl().firstChild;a&&((b=a.style).width=b.height="100%"),this._super()},renderHtml:function(){var h,k,d=this,g=d._id,b=d.classPrefix,c=d.state.get("icon"),m=d.state.get("text"),j="",f=d.settings;return(h=f.image)?(c="none","string"!=typeof h&&(h=window.getSelection?h[0]:h[1]),h=" style=\"background-image: url('"+h+"')\""):h="",m&&(d.classes.add("btn-has-text"),j='<span class="'+b+'txt">'+d.encode(m)+"</span>"),c=c?b+"ico "+b+"i-"+c:"",k="boolean"==typeof f.active?' aria-pressed="'+f.active+'"':"",'<div id="'+g+'" class="'+d.classes+'" tabindex="-1"'+k+'><button id="'+g+'-button" role="presentation" type="button" tabindex="-1">'+(c?'<i class="'+c+'"'+h+"></i>":"")+j+"</button></div>"},bindStates:function(){var c=this,d=c.$,a=c.classPrefix+"txt";function b(g){var f=d("span."+a,c.getEl());g?(f[0]||(d("button:first",c.getEl()).append('<span class="'+a+'"></span>'),f=d("span."+a,c.getEl())),f.html(c.encode(g))):f.remove(),c.classes.toggle("btn-has-text",!!g)}return c.state.on("change:text",function(f){b(f.value)}),c.state.on("change:icon",function(j){var g=j.value,k=c.classPrefix;g=(c.settings.icon=g)?k+"ico "+k+"i-"+c.settings.icon:"";var f=c.getEl().firstChild,h=f.getElementsByTagName("i")[0];g?(h&&h===f.firstChild||(h=document.createElement("i"),f.insertBefore(h,f.firstChild)),h.className=g):h&&f.removeChild(h),b(c.state.get("text"))}),c._super()}}),dJ=cS.extend({init:function(a){a=d3.extend({text:"Browse...",multiple:!1,accept:null},a),this._super(a),this.classes.add("browsebutton"),a.multiple&&this.classes.add("multiple")},postRender:function(){var b=this,a=fz.create("input",{type:"file",id:b._id+"-browse",accept:b.settings.accept});b._super(),cM(a).on("change",function(d){var c=d.target.files;b.value=function(){return c.length?b.settings.multiple?c:c[0]:null},d.preventDefault(),c.length&&b.fire("change",d)}),cM(a).on("click",function(c){c.stopPropagation()}),cM(b.getEl("button")).on("click",function(c){c.stopPropagation(),a.click()}),b.getEl().appendChild(a)},remove:function(){cM(this.getEl("button")).off(),cM(this.getEl("input")).off(),this._super()}}),a0=ch.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var b=this,a=b._layout;return b.classes.add("btn-group"),b.preRender(),a.preRender(b),'<div id="'+b._id+'" class="'+b.classes+'"><div id="'+b._id+'-body">'+(b.settings.html||"")+a.renderHtml(b)+"</div></div>"}}),b7=fg.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(b){var a=this;a._super(b),a.on("click mousedown",function(c){c.preventDefault()}),a.on("click",function(c){c.preventDefault(),a.disabled()||a.checked(!a.checked())}),a.checked(a.settings.checked)},checked:function(a){return arguments.length?(this.state.set("checked",a),this):this.state.get("checked")},value:function(a){return arguments.length?this.checked(a):this.checked()},renderHtml:function(){var b=this,a=b._id,c=b.classPrefix;return'<div id="'+a+'" class="'+b.classes+'" unselectable="on" aria-labelledby="'+a+'-al" tabindex="-1"><i class="'+c+"ico "+c+'i-checkbox"></i><span id="'+a+'-al" class="'+c+'label">'+b.encode(b.state.get("text"))+"</span></div>"},bindStates:function(){var b=this;function a(c){b.classes.toggle("checked",c),b.aria("checked",c)}return b.state.on("change:text",function(c){b.getEl("al").firstChild.data=b.translate(c.value)}),b.state.on("change:checked change:value",function(c){b.fire("change"),a(c.value)}),b.state.on("change:icon",function(g){var d=g.value,h=b.classPrefix;if(void 0===d){return b.settings.icon}d=(b.settings.icon=d)?h+"ico "+h+"i-"+b.settings.icon:"";var c=b.getEl().firstChild,f=c.getElementsByTagName("i")[0];d?(f&&f===c.firstChild||(f=document.createElement("i"),c.insertBefore(f,c.firstChild)),f.className=d):f&&c.removeChild(f)}),b.state.get("checked")&&a(!0),b._super()}}),bs=tinymce.util.Tools.resolve("tinymce.util.VK"),bU=fg.extend({init:function(a){var b=this;b._super(a),a=b.settings,b.classes.add("combobox"),b.subinput=!0,b.ariaTarget="inp",a.menu=a.menu||a.values,a.menu&&(a.icon="caret"),b.on("click",function(d){var c=d.target,f=b.getEl();if(cM.contains(f,c)||c===f){for(;c&&c!==f;){c.id&&-1!==c.id.indexOf("-open")&&(b.fire("action"),a.menu&&(b.showMenu(),d.aria&&b.menu.items()[0].focus())),c=c.parentNode}}}),b.on("keydown",function(d){var c;13===d.keyCode&&"INPUT"===d.target.nodeName&&(d.preventDefault(),b.parents().reverse().each(function(f){if(f.toJSON){return c=f,!1}}),b.fire("submit",{data:c.toJSON()}))}),b.on("keyup",function(d){if("INPUT"===d.target.nodeName){var c=b.state.get("value"),f=d.target.value;f!==c&&(b.state.set("value",f),b.fire("autocomplete",d))}}),b.on("mouseover",function(f){var d=b.tooltip().moveTo(-65535);if(b.statusLevel()&&-1!==f.target.className.indexOf(b.classPrefix+"status")){var g=b.statusMessage()||"Ok",c=d.text(g).show().testMoveRel(f.target,["bc-tc","bc-tl","bc-tr"]);d.classes.toggle("tooltip-n","bc-tc"===c),d.classes.toggle("tooltip-nw","bc-tl"===c),d.classes.toggle("tooltip-ne","bc-tr"===c),d.moveRel(f.target,c)}})},statusLevel:function(a){return 0<arguments.length&&this.state.set("statusLevel",a),this.state.get("statusLevel")},statusMessage:function(a){return 0<arguments.length&&this.state.set("statusMessage",a),this.state.get("statusMessage")},showMenu:function(){var b,a=this,c=a.settings;a.menu||((b=c.menu||[]).length?b={type:"menu",items:b}:b.type=b.type||"menu",a.menu=d4.create(b).parent(a).renderTo(a.getContainerElm()),a.fire("createmenu"),a.menu.reflow(),a.menu.on("cancel",function(d){d.control===a.menu&&a.focus()}),a.menu.on("show hide",function(d){d.control.items().each(function(f){f.active(f.value()===a.value())})}).fire("show"),a.menu.on("select",function(d){a.value(d.control.value())}),a.on("focusin",function(d){"INPUT"===d.target.tagName.toUpperCase()&&a.menu.hide()}),a.aria("expanded",!0)),a.menu.show(),a.menu.layoutRect({w:a.layoutRect().w}),a.menu.moveRel(a.getEl(),a.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var h,k,d=this,g=d.getEl(),b=d.getEl("open"),c=d.layoutRect(),m=0,j=g.firstChild;d.statusLevel()&&"none"!==d.statusLevel()&&(m=parseInt(fz.getRuntimeStyle(j,"padding-right"),10)-parseInt(fz.getRuntimeStyle(j,"padding-left"),10)),h=b?c.w-fz.getSize(b).width-10:c.w-10;var f=document;return f.all&&(!f.documentMode||f.documentMode<=8)&&(k=d.layoutRect().h-2+"px"),cM(j).css({width:h-m,lineHeight:k}),d._super(),d},postRender:function(){var a=this;return cM(this.getEl("inp")).on("change",function(b){a.state.set("value",b.target.value),a.fire("change",b)}),a._super()},renderHtml:function(){var h,m,d,g=this,b=g._id,c=g.settings,p=g.classPrefix,j=g.state.get("value")||"",f="",k="";return"spellcheck" in c&&(k+=' spellcheck="'+c.spellcheck+'"'),c.maxLength&&(k+=' maxlength="'+c.maxLength+'"'),c.size&&(k+=' size="'+c.size+'"'),c.subtype&&(k+=' type="'+c.subtype+'"'),d='<i id="'+b+'-status" class="mce-status mce-ico" style="display: none"></i>',g.disabled()&&(k+=' disabled="disabled"'),(h=c.icon)&&"caret"!==h&&(h=p+"ico "+p+"i-"+c.icon),m=g.state.get("text"),(h||m)&&(f='<div id="'+b+'-open" class="'+p+"btn "+p+'open" tabIndex="-1" role="button"><button id="'+b+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==h?'<i class="'+h+'"></i>':'<i class="'+p+'caret"></i>')+(m?(h?" ":"")+m:"")+"</button></div>",g.classes.add("has-open")),'<div id="'+b+'" class="'+g.classes+'"><input id="'+b+'-inp" class="'+p+'textbox" value="'+g.encode(j,!1)+'" hidefocus="1"'+k+' placeholder="'+g.encode(c.placeholder)+'" />'+d+f+"</div>"},value:function(a){return arguments.length?(this.state.set("value",a),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(d,b){var c=this;if(0!==d.length){c.menu?c.menu.items().remove():c.menu=d4.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(c).renderTo(),d3.each(d,function(g){var f,h;c.menu.add({text:g.title,url:g.previewUrl,match:b,classes:"menu-item-ellipsis",onclick:(f=g.value,h=g.title,function(){c.fire("selectitem",{title:h,value:f})})})}),c.menu.renderNew(),c.hideMenu(),c.menu.on("cancel",function(f){f.control.parent()===c.menu&&(f.stopPropagation(),c.focus(),c.hideMenu())}),c.menu.on("select",function(){c.focus()});var a=c.layoutRect().w;c.menu.layoutRect({w:a,minW:0,maxW:a}),c.menu.repaint(),c.menu.reflow(),c.menu.show(),c.menu.moveRel(c.getEl(),c.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else{c.hideMenu()}},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var a=this;a.state.on("change:value",function(c){a.getEl("inp").value!==c.value&&(a.getEl("inp").value=c.value)}),a.state.on("change:disabled",function(c){a.getEl("inp").disabled=c.value}),a.state.on("change:statusLevel",function(f){var d=a.getEl("status"),g=a.classPrefix,c=f.value;fz.css(d,"display","none"===c?"none":""),fz.toggleClass(d,g+"i-checkmark","ok"===c),fz.toggleClass(d,g+"i-warning","warn"===c),fz.toggleClass(d,g+"i-error","error"===c),a.classes.toggle("has-status","none"!==c),a.repaint()}),fz.on(a.getEl("status"),"mouseleave",function(){a.tooltip().hide()}),a.on("cancel",function(c){a.menu&&a.menu.visible()&&(c.stopPropagation(),a.hideMenu())});var b=function(d,c){c&&0<c.items().length&&c.items().eq(d)[0].focus()};return a.on("keydown",function(d){var c=d.keyCode;"INPUT"===d.target.nodeName&&(c===bs.DOWN?(d.preventDefault(),a.fire("autocomplete"),b(0,a.menu)):c===bs.UP&&(d.preventDefault(),b(-1,a.menu)))}),a._super()},remove:function(){cM(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ba=bU.extend({init:function(b){var a=this;b.spellcheck=!1,b.onaction&&(b.icon="none"),a._super(b),a.classes.add("colorbox"),a.on("change keyup postrender",function(){a.repaintColor(a.value())})},repaintColor:function(c){var b=this.getEl("open"),d=b?b.getElementsByTagName("i")[0]:null;if(d){try{d.style.background=c}catch(a){}}},bindStates:function(){var a=this;return a.state.on("change:value",function(b){a.state.get("rendered")&&a.repaintColor(b.value)}),a._super()}}),fo=cS.extend({showPanel:function(){var b=this,d=b.settings;if(b.classes.add("opened"),b.panel){b.panel.show()}else{var f=d.panel;f.type&&(f={layout:"grid",items:f}),f.role=f.role||"dialog",f.popover=!0,f.autohide=!0,f.ariaRoot=!0,b.panel=new cl(f).on("hide",function(){b.classes.remove("opened")}).on("cancel",function(g){g.stopPropagation(),b.focus(),b.hidePanel()}).parent(b).renderTo(b.getContainerElm()),b.panel.fire("show"),b.panel.reflow()}var a=b.panel.testMoveRel(b.getEl(),d.popoverAlign||(b.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));b.panel.classes.toggle("start","l"===a.substr(-1)),b.panel.classes.toggle("end","r"===a.substr(-1));var c="t"===a.substr(0,1);b.panel.classes.toggle("bottom",!c),b.panel.classes.toggle("top",c),b.panel.moveRel(b.getEl(),a)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var a=this;return a.aria("haspopup",!0),a.on("click",function(b){b.control===a&&(a.panel&&a.panel.visible()?a.hidePanel():(a.showPanel(),a.panel.focus(!!b.aria)))}),a._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),cx=ec.DOM,aQ=fo.extend({init:function(a){this._super(a),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(a){return a?(this._color=a,this.getEl("preview").style.backgroundColor=a,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var f=this,b=f._id,h=f.classPrefix,a=f.state.get("text"),d=f.settings.icon?h+"ico "+h+"i-"+f.settings.icon:"",g=f.settings.image?" style=\"background-image: url('"+f.settings.image+"')\"":"",c="";return a&&(f.classes.add("btn-has-text"),c='<span class="'+h+'txt">'+f.encode(a)+"</span>"),'<div id="'+b+'" class="'+f.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(d?'<i class="'+d+'"'+g+"></i>":"")+'<span id="'+b+'-preview" class="'+h+'preview"></span>'+c+'</button><button type="button" class="'+h+'open" hidefocus="1" tabindex="-1"> <i class="'+h+'caret"></i></button></div>'},postRender:function(){var a=this,b=a.settings.onclick;return a.on("click",function(c){c.aria&&"down"===c.aria.key||c.control!==a||cx.getParent(c.target,"."+a.classPrefix+"open")||(c.stopImmediatePropagation(),b.call(a,c))}),delete a.settings.onclick,a._super()}}),ef=tinymce.util.Tools.resolve("tinymce.util.Color"),dT=fg.extend({Defaults:{classes:"widget colorpicker"},init:function(a){this._super(a)},postRender:function(){var f,h,b,d,v,m=this,g=m.color();function p(o,c){var s,a,l=fz.getPos(o);return s=c.pageX-l.x,a=c.pageY-l.y,{x:s=Math.max(0,Math.min(s/o.clientWidth,1)),y:a=Math.max(0,Math.min(a/o.clientHeight,1))}}function k(c,a){var i=(360-c.h)/360;fz.css(b,{top:100*i+"%"}),a||fz.css(v,{left:c.s+"%",top:100-c.v+"%"}),d.style.background=ef({s:100,v:100,h:c.h}).toHex(),m.color().parse({s:c.s,v:c.v,h:c.h})}function j(c){var a;a=p(d,c),f.s=100*a.x,f.v=100*(1-a.y),k(f),m.fire("change")}function q(c){var a;a=p(h,c),(f=g.toHsv()).h=360*(1-a.y),k(f,!0),m.fire("change")}h=m.getEl("h"),b=m.getEl("hp"),d=m.getEl("sv"),v=m.getEl("svp"),m._repaint=function(){k(f=g.toHsv())},m._super(),m._svdraghelper=new bI(m._id+"-sv",{start:j,drag:j}),m._hdraghelper=new bI(m._id+"-h",{start:q,drag:q}),m._repaint()},rgb:function(){return this.color().toRgb()},value:function(a){if(!arguments.length){return this.color().toHex()}this.color().parse(a),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=ef()),this._color},renderHtml:function(){var c,a=this._id,d=this.classPrefix,b="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return c='<div id="'+a+'-h" class="'+d+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){var j,g,k,f,h="";for(k="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",j=0,g=(f=b.split(",")).length-1;j<g;j++){h+='<div class="'+d+'colorpicker-h-chunk" style="height:'+100/g+"%;"+k+f[j]+",endColorstr="+f[j+1]+");-ms-"+k+f[j]+",endColorstr="+f[j+1]+')"></div>'}return h}()+'<div id="'+a+'-hp" class="'+d+'colorpicker-h-marker"></div></div>','<div id="'+a+'" class="'+this.classes+'"><div id="'+a+'-sv" class="'+d+'colorpicker-sv"><div class="'+d+'colorpicker-overlay1"><div class="'+d+'colorpicker-overlay2"><div id="'+a+'-svp" class="'+d+'colorpicker-selector1"><div class="'+d+'colorpicker-selector2"></div></div></div></div></div>'+c+"</div>"}}),dz=fg.extend({init:function(a){a=d3.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},a),this._super(a),this.classes.add("dropzone"),a.multiple&&this.classes.add("multiple")},renderHtml:function(){var b,a,c=this.settings;return b={id:this._id,hidefocus:"1"},a=fz.create("div",b,"<span>"+this.translate(c.text)+"</span>"),c.height&&fz.css(a,"height",c.height+"px"),c.width&&fz.css(a,"width",c.width+"px"),a.className=this.classes,a.outerHTML},postRender:function(){var a=this,b=function(c){c.preventDefault(),a.classes.toggle("dragenter"),a.getEl().className=a.classes};a._super(),a.$el.on("dragover",function(c){c.preventDefault()}),a.$el.on("dragenter",b),a.$el.on("dragleave",b),a.$el.on("drop",function(d){if(d.preventDefault(),!a.state.get("disabled")){var c=function(g){var f=a.settings.accept;if("string"!=typeof f){return g}var h=new RegExp("("+f.split(/\s*,\s*/).join("|")+")$","i");return d3.grep(g,function(i){return h.test(i.name)})}(d.dataTransfer.files);a.value=function(){return c.length?a.settings.multiple?c:c[0]:null},c.length&&a.fire("change",d)}})},remove:function(){this.$el.off(),this._super()}}),c9=fg.extend({init:function(a){var b=this;a.delimiter||(a.delimiter="\xbb"),b._super(a),b.classes.add("path"),b.canFocus=!0,b.on("click",function(d){var c;(c=d.target.getAttribute("data-index"))&&b.fire("select",{value:b.row()[c],index:c})}),b.row(b.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(a){return arguments.length?(this.state.set("row",a),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var a=this;return a.state.on("change:row",function(b){a.innerHtml(a._getDataPathHtml(b.value))}),a._super()},_getDataPathHtml:function(d){var b,g,a=d||[],c="",f=this.classPrefix;for(b=0,g=a.length;b<g;b++){c+=(0<b?'<div class="'+f+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+f+"path-item"+(b===g-1?" "+f+"last":"")+'" data-index="'+b+'" tabindex="-1" id="'+this._id+"-"+b+'" aria-level="'+(b+1)+'">'+a[b].name+"</div>"}return c||(c='<div class="'+f+'path-item">\xa0</div>'),c}}),ck=c9.extend({postRender:function(){var d=this,c=d.settings.editor;function b(a){if(1===a.nodeType){if("BR"===a.nodeName||a.getAttribute("data-mce-bogus")){return !0}if("bookmark"===a.getAttribute("data-mce-type")){return !0}}return !1}return !1!==c.settings.elementpath&&(d.on("select",function(a){c.focus(),c.selection.select(this.row()[a.index].element),c.nodeChanged()}),c.on("nodeChange",function(h){for(var f=[],j=h.parents,a=j.length;a--;){if(1===j[a].nodeType&&!b(j[a])){var g=c.fire("ResolveName",{name:j[a].nodeName.toLowerCase(),target:j[a]});if(g.isDefaultPrevented()||f.push({name:g.name,element:j[a]}),g.isPropagationStopped()){break}}}d.row(f)})),d._super()}}),dl=ch.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var b=this,a=b._layout,c=b.classPrefix;return b.classes.add("formitem"),a.preRender(b),'<div id="'+b._id+'" class="'+b.classes+'" hidefocus="1" tabindex="-1">'+(b.settings.title?'<div id="'+b._id+'-title" class="'+c+'title">'+b.settings.title+"</div>":"")+'<div id="'+b._id+'-body" class="'+b.bodyClasses+'">'+(b.settings.html||"")+a.renderHtml(b)+"</div></div>"}}),bK=ch.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var a=this,b=a.items();a.settings.formItemDefaults||(a.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),b.each(function(d){var c,f=d.settings.label;f&&((c=new dl(d3.extend({items:{type:"label",id:d._id+"-l",text:f,flex:0,forId:d._id,disabled:d.disabled()}},a.settings.formItemDefaults))).type="formitem",d.aria("labelledby",d._id+"-l"),"undefined"==typeof d.settings.flex&&(d.settings.flex=1),a.replace(d,c),c.add(d))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var b=this;function a(){var g,d,c=0,f=[];if(!1!==b.settings.labelGapCalc){for(("children"===b.settings.labelGapCalc?b.find("formitem"):b.items()).filter("formitem").each(function(i){var h=i.items()[0],j=h.getEl().clientWidth;c=c<j?j:c,f.push(h)}),d=b.settings.labelGap||0,g=f.length;g--;){f[g].settings.minWidth=c+d}}}b._super(),b.on("show",a),a()}}),aG=bK.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var b=this,a=b._layout,c=b.classPrefix;return b.preRender(),a.preRender(b),'<fieldset id="'+b._id+'" class="'+b.classes+'" hidefocus="1" tabindex="-1">'+(b.settings.title?'<legend id="'+b._id+'-title" class="'+c+'fieldset-title">'+b.settings.title+"</legend>":"")+'<div id="'+b._id+'-body" class="'+b.bodyClasses+'">'+(b.settings.html||"")+a.renderHtml(b)+"</div></fieldset>"}}),eS=0,fC=function(b){var a=(new Date).getTime();return b+"_"+Math.floor(1000000000*Math.random())+ ++eS+String(a)},ab=function(a){if(null===a||a===undefined){throw new Error("Node cannot be null or undefined")}return{dom:e3.constant(a)}},aw={fromHtml:function(b,a){var c=(a||document).createElement("div");if(c.innerHTML=b,!c.hasChildNodes()||1<c.childNodes.length){throw console.error("HTML does not have a single root node",b),"HTML must have a single root node"}return ab(c.childNodes[0])},fromTag:function(b,a){var c=(a||document).createElement(b);return ab(c)},fromText:function(b,a){var c=(a||document).createTextNode(b);return ab(c)},fromDom:ab,fromPoint:function(b,a,c){return eU.from(b.dom().elementFromPoint(a,c)).map(ab)}},ag=function(b){var a,c=!1;return function(){return c||(c=!0,a=b.apply(null,arguments)),a}},cL=9,aV=1,cH=3,aB=function(a){return a.dom().nodeType},fv=function(a){return function(b){return aB(b)===a}},cB=(fv(aV),fv(cH),fv(cL),ag(function(){return cB(aw.fromDom(document))}),function(b){var a=b.dom().body;if(null===a||a===undefined){throw"Body is not available yet"}return aw.fromDom(a)}),dD=(bC=Object.keys)===undefined?function(b){var a=[];for(var c in b){b.hasOwnProperty(c)&&a.push(c)}return a}:bC,cp=function(d,b){for(var g=dD(d),a=0,c=g.length;a<c;a++){var f=g[a];b(d[f],f,d)}},c3=function(a,b){var c={};return cp(a,function(f,d){var g=b(f,d,a);c[g.k]=g.v}),c},bO=function(b,c){var a=[];return cp(b,function(f,d){a.push(c(f,d))}),a},ds=function(a){return bO(a,function(b){return b})},aL={bifilter:function(c,d){var a={},b={};return cp(c,function(g,f){(d(g,f)?a:b)[f]=g}),{t:a,f:b}},each:cp,map:function(b,a){return c3(b,function(d,c,f){return{k:c,v:a(d,c,f)}})},mapToArray:bO,tupleMap:c3,find:function(f,b){for(var h=dD(f),a=0,d=h.length;a<d;a++){var g=h[a],c=f[g];if(b(c,g,f)){return eU.some(c)}}return eU.none()},keys:dD,values:ds,size:function(a){return ds(a).length}},bk=function(a){return a.slice(0).sort()},a5=function(b,a){throw new Error("All required keys ("+bk(b).join(", ")+") were not specified. Specified keys were: "+bk(a).join(", ")+".")},dd=function(a){throw new Error("Unsupported keys for object: "+bk(a).join(", "))},fj=function(a,b){if(!eb.isArray(b)){throw new Error("The "+a+" fields must be an array. Was: "+b+".")}bZ.each(b,function(c){if(!eb.isString(c)){throw new Error("The value "+c+" in the "+a+" fields was not a string.")}})},dN=function(a){var b=bk(a);bZ.find(b,function(d,c){return c<b.length-1&&d===b[c+1]}).each(function(c){throw new Error("The field: "+c+" occurs more than once in the combined fields: ["+b.join(", ")+"].")})},e4={immutable:function(){for(var a=[],b=0;b<arguments.length;b++){a[b]=arguments[b]}return function(){for(var f=[],d=0;d<arguments.length;d++){f[d]=arguments[d]}if(a.length!==f.length){throw new Error('Wrong number of arguments to struct. Expected "['+a.length+']", got '+f.length+" arguments")}var c={};return bZ.each(a,function(h,g){c[h]=e3.constant(f[g])}),c}},immutableBag:function(b,c){var a=b.concat(c);if(0===a.length){throw new Error("You must specify at least one required or optional field.")}return fj("required",b),fj("optional",c),dN(a),function(f){var h=aL.keys(f);bZ.forall(b,function(i){return bZ.contains(h,i)})||a5(b,h);var g=bZ.filter(h,function(i){return !bZ.contains(a,i)});0<g.length&&dd(g);var d={};return bZ.each(b,function(i){d[i]=e3.constant(f[i])}),bZ.each(c,function(i){d[i]=e3.constant(Object.prototype.hasOwnProperty.call(f,i)?eU.some(f[i]):eU.none())}),d}}},am=("undefined"!=typeof window?window:Function("return this;")(),function(c,b){var d=function(h,g){for(var j=0;j<h.length;j++){var f=h[j];if(f.test(g)){return f}}return undefined}(c,b);if(!d){return{major:0,minor:0}}var a=function(f){return Number(b.replace(d,"$"+f))};return bY(a(1),a(2))}),cc=function(){return bY(0,0)},bY=function(b,a){return{major:b,minor:a}},cR={nu:bY,detect:function(b,a){var c=String(a).toLowerCase();return 0===b.length?cc():am(b,c)},unknown:cc},bB="Firefox",bw=function(b,a){return function(){return a===b}},b3=function(b){var a=b.current;return{current:a,version:b.version,isEdge:bw("Edge",a),isChrome:bw("Chrome",a),isIE:bw("IE",a),isOpera:bw("Opera",a),isFirefox:bw(bB,a),isSafari:bw("Safari",a)}},bE={unknown:function(){return b3({current:undefined,version:cR.unknown()})},nu:b3,edge:e3.constant("Edge"),chrome:e3.constant("Chrome"),ie:e3.constant("IE"),opera:e3.constant("Opera"),firefox:e3.constant(bB),safari:e3.constant("Safari")},eu="Windows",fG="Android",dW="Solaris",bd="FreeBSD",cU=function(b,a){return function(){return a===b}},dM=function(b){var a=b.current;return{current:a,version:b.version,isWindows:cU(eu,a),isiOS:cU("iOS",a),isAndroid:cU(fG,a),isOSX:cU("OSX",a),isLinux:cU("Linux",a),isSolaris:cU(dW,a),isFreeBSD:cU(bd,a)}},a1={unknown:function(){return dM({current:undefined,version:cR.unknown()})},nu:dM,windows:e3.constant(eu),ios:e3.constant("iOS"),android:e3.constant(fG),linux:e3.constant("Linux"),osx:e3.constant("OSX"),solaris:e3.constant(dW),freebsd:e3.constant(bd)},cb=function(b,a){var c=String(a).toLowerCase();return bZ.find(b,function(d){return d.search(c)})},c2=function(a,b){return cb(a,b).map(function(d){var c=cR.detect(d.versionRegexes,b);return{current:d.name,version:c}})},bv=function(a,b){return cb(a,b).map(function(d){var c=cR.detect(d.versionRegexes,b);return{current:d.name,version:c}})},bX=function(b,a){return -1!==b.indexOf(a)},bc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,fu=function(a){return function(b){return bX(b,a)}},cA=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return bX(a,"edge/")&&bX(a,"chrome")&&bX(a,"safari")&&bX(a,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bc],search:function(a){return bX(a,"chrome")&&!bX(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return bX(a,"msie")||bX(a,"trident")}},{name:"Opera",versionRegexes:[bc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:fu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:fu("firefox")},{name:"Safari",versionRegexes:[bc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(bX(a,"safari")||bX(a,"mobile/"))&&bX(a,"applewebkit")}}],aR=[{name:"Windows",search:fu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return bX(a,"iphone")||bX(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:fu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:fu("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:fu("linux"),versionRegexes:[]},{name:"Solaris",search:fu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:fu("freebsd"),versionRegexes:[]}],eo={browsers:e3.constant(cA),oses:e3.constant(aR)},dV=function(z){var E,k,v,b,j,F,C,q,D,B,A,y=eo.browsers(),w=eo.oses(),p=c2(y,z).fold(bE.unknown,bE.nu),x=bv(w,z).fold(a1.unknown,a1.nu);return{browser:p,os:x,deviceType:(k=p,v=z,b=(E=x).isiOS()&&!0===/ipad/i.test(v),j=E.isiOS()&&!b,F=E.isAndroid()&&3===E.version.major,C=E.isAndroid()&&4===E.version.major,q=b||F||C&&!0===/mobile/i.test(v),D=E.isiOS()||E.isAndroid(),B=D&&!q,A=k.isSafari()&&E.isiOS()&&!1===/safari/i.test(v),{isiPad:e3.constant(b),isiPhone:e3.constant(j),isTablet:e3.constant(q),isPhone:e3.constant(B),isTouch:e3.constant(D),isAndroid:E.isAndroid,isiOS:E.isiOS,isWebView:e3.constant(A)})}},dC=ag(function(){var a=navigator.userAgent;return dV(a)}),dc=aV,co=cL,dq=function(a){return a.nodeType!==dc&&a.nodeType!==co||0===a.childElementCount},bN={all:function(b,a){var c=a===undefined?document:a.dom();return dq(c)?[]:bZ.map(c.querySelectorAll(b),aw.fromDom)},is:function(b,a){var c=b.dom();if(c.nodeType!==dc){return !1}if(c.matches!==undefined){return c.matches(a)}if(c.msMatchesSelector!==undefined){return c.msMatchesSelector(a)}if(c.webkitMatchesSelector!==undefined){return c.webkitMatchesSelector(a)}if(c.mozMatchesSelector!==undefined){return c.mozMatchesSelector(a)}throw new Error("Browser lacks native selectors")},one:function(b,a){var c=a===undefined?document:a.dom();return dq(c)?eU.none():eU.from(c.querySelector(b)).map(aw.fromDom)}},aH=(dC().browser.isIE(),e4.immutable("element","offset"),function(b,a){return bN.all(a,b)}),e0=d3.trim,fD=function(a){return function(b){if(b&&1===b.nodeType){if(b.contentEditable===a){return !0}if(b.getAttribute("data-mce-contenteditable")===a){return !0}}return !1}},af=fD("true"),ax=fD("false"),al=function(d,b,f,a,c){return{type:d,title:b,url:f,level:a,attach:c}},cN=function(a){return a.innerText||a.textContent},aW=function(b){return(a=b)&&"A"===a.nodeName&&(a.id||a.name)&&aC(b);var a},cK=function(a){return a&&/^(H[1-6])$/.test(a.nodeName)},aC=function(a){return function(c){for(;c=c.parentNode;){var b=c.contentEditable;if(b&&"inherit"!==b){return af(c)}}return !1}(a)&&!ax(a)},fy=function(a){return cK(a)&&aC(a)},cD=function(c){var b,d,a=(b=c).id?b.id:fC("h");return al("header",cN(c),"#"+a,cK(d=c)?parseInt(d.nodeName.substr(1),10):0,function(){c.id=a})},dF=function(b){var a=b.id||b.name,c=cN(b);return al("anchor",c||"#"+a,"#"+a,0,e3.noop)},cs=function(b){var a,c;return a="h1,h2,h3,h4,h5,h6,a:not([href])",c=b,bZ.map(aH(aw.fromDom(c),a),function(d){return d.dom()})},c5=function(a){return 0<e0(a.title).length},bQ=function(c){var b,d,a=cs(c);return bZ.filter((d=a,bZ.map(bZ.filter(d,fy),cD)).concat((b=a,bZ.map(bZ.filter(b,aW),dF))),c5)},dv={},aM=function(a){return{title:a.title,value:{title:{raw:a.title},url:a.url,attach:a.attach}}},bm=function(b,a){return{title:b,value:{title:b,url:a,attach:e3.noop}}},a6=function(c,b,d){var a=b in c?c[b]:d;return !1===a?null:a},dg=function(j,h,b,q){var f,d,v,m,g={title:"-"},p=function(c){var a=c.hasOwnProperty(b)?c[b]:[],i=bZ.filter(a,function(o){return l=o,r=h,!bZ.exists(r,function(n){return n.url===l});var l,r});return d3.map(i,function(l){return{title:l,value:{title:l,url:l,attach:e3.noop}}})},k=function(a){var c,i=bZ.filter(h,function(l){return l.type===a});return c=i,d3.map(c,aM)};return !1===q.typeahead_urls?[]:"file"===b?(f=[fm(j,p(dv)),fm(j,k("header")),fm(j,(d=k("anchor"),v=a6(q,"anchor_top","#top"),m=a6(q,"anchor_bottom","#bottom"),null!==v&&d.unshift(bm("<top>",v)),null!==m&&d.push(bm("<bottom>",m)),d))],bZ.foldl(f,function(c,a){return 0===c.length||0===a.length?c.concat(a):c.concat(g,a)},[])):fm(j,p(dv))},fm=function(c,b){var d=c.toLowerCase(),a=d3.grep(b,function(f){return -1!==f.title.toLowerCase().indexOf(d)});return 1===a.length&&a[0].title===c?[]:a},dP=function(d,b,e,c){var a=function(g){var f=bQ(e),h=dg(g,f,c,b);d.showAutoComplete(h,g)};d.on("autocomplete",function(){a(d.value())}),d.on("selectitem",function(h){var g=h.value;d.value(g.url);var j,f=(j=g.title).raw?j.raw:j;"image"===c?d.fire("change",{meta:{alt:f,attach:g.attach}}):d.fire("change",{meta:{text:f,attach:g.attach}}),d.focus()}),d.on("click",function(f){0===d.value().length&&"INPUT"===f.target.nodeName&&a("")}),d.on("PostRender",function(){d.getRoot().on("submit",function(h){var g,j,f;h.isDefaultPrevented()||(g=d.value(),f=dv[j=c],/^https?/.test(g)&&(f?bZ.indexOf(f,g).isNone()&&(dv[j]=f.slice(0,5).concat(g)):dv[j]=[g]))})})},fb=function(c,b,d){var a=b.filepicker_validator_handler;a&&c.state.on("change:value",function(g){var f;0!==(f=g.value).length?a({url:f,type:d},function(l){var j,m,h,k=(m=(j=l).status,h=j.message,"valid"===m?{status:"ok",message:h}:"unknown"===m?{status:"warn",message:h}:"invalid"===m?{status:"warn",message:h}:{status:"none",message:""});c.statusMessage(k.message),c.statusLevel(k.status)}):c.statusLevel("none")})},ap=bU.extend({Statics:{clearHistory:function(){dv={}}},init:function(h){var d,k,c,g=this,j=window.tinymce?window.tinymce.activeEditor:ek.activeEditor,f=j.settings,b=h.filetype;h.spellcheck=!1,(c=f.file_picker_types||f.file_browser_callback_types)&&(c=d3.makeMap(c,/[, ]/)),c&&!c[b]||(!(k=f.file_picker_callback)||c&&!c[b]?!(k=f.file_browser_callback)||c&&!c[b]||(d=function(){k(g.getEl("inp").id,g.value(),b,window)}):d=function(){var a=g.fire("beforecall").meta;a=d3.extend({filetype:b},a),k.call(j,function(l,i){g.value(l).fire("change",{meta:i})},g.value(),a)}),d&&(h.icon="browse",h.onaction=d),g._super(h),g.classes.add("filepicker"),dP(g,f,j.getBody(),b),fb(g,f,b)}}),cf=bb.extend({recalc:function(b){var a=b.layoutRect(),c=b.paddingBox;b.items().filter(":visible").each(function(d){d.layoutRect({x:c.left,y:c.top,w:a.innerW-c.right-c.left,h:a.innerH-c.top-c.bottom}),d.recalc&&d.recalc()})}}),b0=bb.extend({recalc:function(fe){var cn,dn,ei,ct,di,cr,ft,dt,ci,fn,fi,et,en,dr,er,de,ce,fr,bn,br,bt,fK,J,ar,ee,ai,Z,G,V,q,K,j,U,an,be,at,Q,bi=[],X=Math.max,Y=Math.min;for(ei=fe.items().filter(":visible"),ct=fe.layoutRect(),di=fe.paddingBox,cr=fe.settings,et=fe.isRtl()?cr.direction||"row-reversed":cr.direction,ft=cr.align,dt=fe.isRtl()?cr.pack||"end":cr.pack,ci=cr.spacing||0,"row-reversed"!==et&&"column-reverse"!==et||(ei=ei.set(ei.toArray().reverse()),et=et.split("-")[0]),"column"===et?(ar="y",fK="h",J="minH",ee="maxH",Z="innerH",ai="top",G="deltaH",V="contentH",an="left",j="w",q="x",K="innerW",U="minW",be="right",at="deltaW",Q="contentW"):(ar="x",fK="w",J="minW",ee="maxW",Z="innerW",ai="left",G="deltaW",V="contentW",an="top",j="h",q="y",K="innerH",U="minH",be="bottom",at="deltaH",Q="contentH"),fi=ct[Z]-di[ai]-di[ai],bt=fn=0,cn=0,dn=ei.length;cn<dn;cn++){dr=(en=ei[cn]).layoutRect(),fi-=cn<dn-1?ci:0,0<(er=en.settings.flex)&&(fn+=er,dr[ee]&&bi.push(en),dr.flex=er),fi-=dr[J],bt<(de=di[an]+dr[U]+di[be])&&(bt=de)}if((bn={})[J]=fi<0?ct[J]-fi+ct[G]:ct[Z]-fi+ct[G],bn[U]=bt+ct[at],bn[V]=ct[Z]-fi,bn[Q]=bt,bn.minW=Y(bn.minW,ct.maxW),bn.minH=Y(bn.minH,ct.maxH),bn.minW=X(bn.minW,ct.startMinWidth),bn.minH=X(bn.minH,ct.startMinHeight),!ct.autoResize||bn.minW===ct.minW&&bn.minH===ct.minH){for(fr=fi/fn,cn=0,dn=bi.length;cn<dn;cn++){(ce=(dr=(en=bi[cn]).layoutRect())[ee])<(de=dr[J]+dr.flex*fr)?(fi-=dr[ee]-dr[J],fn-=dr.flex,dr.flex=0,dr.maxFlexSize=ce):dr.maxFlexSize=0}for(fr=fi/fn,br=di[ai],bn={},0===fn&&("end"===dt?br=fi+di[ai]:"center"===dt?(br=Math.round(ct[Z]/2-(ct[Z]-fi)/2)+di[ai])<0&&(br=di[ai]):"justify"===dt&&(br=di[ai],ci=Math.floor(fi/(ei.length-1)))),bn[q]=di[an],cn=0,dn=ei.length;cn<dn;cn++){de=(dr=(en=ei[cn]).layoutRect()).maxFlexSize||dr[J],"center"===ft?bn[q]=Math.round(ct[K]/2-dr[j]/2):"stretch"===ft?(bn[j]=X(dr[U]||0,ct[K]-di[an]-di[be]),bn[q]=di[an]):"end"===ft&&(bn[q]=ct[K]-dr[j]-di.top),0<dr.flex&&(de+=dr.flex*fr),bn[fK]=de,bn[ar]=br,en.layoutRect(bn),en.recalc&&en.recalc(),br+=de+ci}}else{if(bn.w=bn.minW,bn.h=bn.minH,fe.layoutRect(bn),this.recalc(fe),null===fe._lastRect){var ae=fe.parent();ae&&(ae._lastRect=null,ae.recalc())}}}}),cT=dU.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(a){a.items().filter(":visible").each(function(b){b.recalc&&b.recalc()})},isNative:function(){return !0}}),bD=function(b,a){return bN.one(a,b)},by=function(b,a){return function(){b.execCommand("mceToggleFormat",!1,a)}},b6=function(c,b,d){var a=function(f){d(f,b)};c.formatter?c.formatter.formatChanged(b,a):c.on("init",function(){c.formatter.formatChanged(b,a)})},bG=function(a,b){return function(c){b6(a,b,function(d){c.control.active(d)})}},eB=function(b){var a=["alignleft","aligncenter","alignright","alignjustify"],c="alignleft",d=[{text:"Left",icon:"alignleft",onclick:by(b,"alignleft")},{text:"Center",icon:"aligncenter",onclick:by(b,"aligncenter")},{text:"Right",icon:"alignright",onclick:by(b,"alignright")},{text:"Justify",icon:"alignjustify",onclick:by(b,"alignjustify")}];b.addMenuItem("align",{text:"Align",menu:d}),b.addButton("align",{type:"menubutton",icon:c,menu:d,onShowMenu:function(f){var g=f.control.menu;d3.each(a,function(h,i){g.items().eq(i).each(function(j){return j.active(b.formatter.match(h))})})},onPostRender:function(f){var g=f.control;d3.each(a,function(h,i){b6(b,h,function(j){g.icon(c),j&&g.icon(h)})})}}),d3.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(g,f){b.addButton(f,{active:!1,tooltip:g[0],cmd:g[1],onPostRender:bG(b,f)})})},fH=function(a){return a?a.split(",")[0]:""},dY=function(a,b){return function(){var c=this;a.on("init nodeChange",function(j){var f,l,d,h,k=a.queryCommandValue("FontName"),g=(f=b,h=(l=k)?l.toLowerCase():"",d3.each(f,function(i){i.value.toLowerCase()===h&&(d=i.value)}),d3.each(f,function(i){d||fH(i.value).toLowerCase()!==fH(h).toLowerCase()||(d=i.value)}),d);c.value(g||null),!g&&k&&c.text(fH(k))})}},bj=function(a){a.addButton("fontselect",function(){var c,b=(c=function(f){for(var d=(f=f.replace(/;$/,"").split(";")).length;d--;){f[d]=f[d].split("=")}return f}(a.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),d3.map(c,function(d){return{text:{raw:d[0]},value:d[1],textStyle:-1===d[1].indexOf("dings")?"font-family:"+d[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:b,fixedWidth:!0,onPostRender:dY(a,b),onselect:function(d){d.control.settings.value&&a.execCommand("FontName",!1,d.control.settings.value)}}})},cW=function(a){bj(a)},dI=function(d,b){return/[0-9.]+px$/.test(d)?(f=72*parseInt(d,10)/96,a=b||0,c=Math.pow(10,a),Math.round(f*c)/c+"pt"):d;var f,a,c},aZ=function(c,b,d){var a;return d3.each(c,function(f){f.value===d?a=d:f.value===b&&(a=b)}),a},b5=function(a){a.addButton("fontsizeselect",function(){var f,d,b,c=(f=a.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",d3.map(f.split(" "),function(j){var h=j,k=j,g=j.split("=");return 1<g.length&&(h=g[0],k=g[1]),{text:h,value:k}}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:c,fixedWidth:!0,onPostRender:(d=a,b=c,function(){var e=this;d.on("init nodeChange",function(k){var h,l,g,j;if(h=d.queryCommandValue("FontSize")){for(g=3;!j&&0<=g;g--){l=dI(h,g),j=aZ(b,l,h)}}e.value(j||null),j||e.text(l)})}),onclick:function(g){g.control.settings.value&&a.execCommand("FontSize",!1,g.control.settings.value)}}})},cZ=function(a){b5(a)},bq=function(c,b){var a=b.length;return d3.each(b,function(f){f.menu&&(f.hidden=0===bq(c,f.menu));var d=f.format;d&&(f.hidden=!c.formatter.canApply(d)),f.hidden&&a--}),a},bT=function(c,b){var a=b.items().length;return b.items().each(function(f){f.menu&&f.visible(0<bT(c,f.menu)),!f.menu&&f.settings.menu&&f.visible(0<bq(c,f.settings.menu));var d=f.settings.format;d&&f.visible(c.formatter.canApply(d)),f.visible()||a--}),a},a9=function(h){var g,b,c,m,p,d,j,f,k=(b=0,c=[],m=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],p=function(l){var a=[];if(l){return d3.each(l,function(o){var i={text:o.title,icon:o.icon};if(o.items){i.menu=p(o.items)}else{var q=o.format||"custom"+b++;o.format||(o.name=q,c.push(o)),i.format=q,i.cmd=o.cmd}a.push(i)}),a}},(g=h).on("init",function(){d3.each(c,function(a){g.formatter.register(a.name,a)})}),{type:"menu",items:g.settings.style_formats_merge?g.settings.style_formats?p(m.concat(g.settings.style_formats)):p(m):p(g.settings.style_formats||m),onPostRender:function(a){g.fire("renderFormatsMenu",{control:a.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format){return g.formatter.getCssText(this.settings.format)}},onPostRender:function(){var a=this;a.parent().on("show",function(){var l,i;(l=a.settings.format)&&(a.disabled(!g.formatter.canApply(l)),a.active(g.formatter.match(l))),(i=a.settings.cmd)&&a.active(g.queryCommandState(i))})},onclick:function(){this.settings.format&&by(g,this.settings.format)(),this.settings.cmd&&g.execCommand(this.settings.cmd)}}});d=k,h.addMenuItem("formats",{text:"Formats",menu:d}),f=k,(j=h).addButton("styleselect",{type:"menubutton",text:"Formats",menu:f,onShowMenu:function(){j.settings.style_formats_autohide&&bT(j,this.menu)}})},fl=function(b,a){return function(){var e,f,d,c=[];return d3.each(a,function(g){c.push({text:g[0],value:g[1],textStyle:function(){return b.formatter.getCssText(g[1])}})}),{type:"listbox",text:a[0][0],values:c,fixedWidth:!0,onselect:function(h){if(h.control){var g=h.control.value();by(b,g)()}},onPostRender:(e=b,f=c,function(){var g=this;e.on("nodeChange",function(j){var k=e.formatter,h=null;d3.each(j.parents,function(i){if(d3.each(f,function(l){if(d?k.matchNode(i,d,{value:l.value})&&(h=l.value):k.matchNode(i,l.value)&&(h=l.value),h){return !1}}),h){return !1}}),g.value(h)})})}}},cw=function(c){var b,d,a=function(g){for(var f=(g=g.replace(/;$/,"").split(";")).length;f--;){g[f]=g[f].split("=")}return g}(c.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");c.addMenuItem("blockformats",{text:"Blocks",menu:(b=c,d=a,d3.map(d,function(f){return{text:f[0],onclick:by(b,f[1]),textStyle:function(){return b.formatter.getCssText(f[1])}}}))}),c.addButton("formatselect",fl(c,a))},aP=function(b,c){var d,a;if("string"==typeof c){a=c.split(" ")}else{if(d3.isArray(c)){return bZ.flatten(d3.map(c,function(f){return aP(b,f)}))}}return d=d3.grep(a,function(f){return"|"===f||f in b.menuItems}),d3.map(d,function(f){return"|"===f?{text:"-"}:b.menuItems[f]})},d9=function(a){return a&&"-"===a.text},dS=function(b){var a=bZ.filter(b,function(d,c,f){return !d9(d)||!d9(f[c-1])});return bZ.filter(a,function(d,c,f){return !d9(d)||0<c&&c<f.length-1})},dy=function(d){var b,g,a,c,f=d.settings.insert_button_items;return dS(f?aP(d,f):(b=d,g="insert",a=[{text:"-"}],c=d3.grep(b.menuItems,function(h){return h.context===g}),d3.each(c,function(h){"before"===h.separator&&a.push({text:"|"}),h.prependToContext?a.unshift(h):a.push(h),"after"===h.separator&&a.push({text:"|"})}),a))},c8=function(b){var a;(a=b).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(dy(a)),this.menu.renderNew()}})},cj=function(c){var d,a,b;d=c,d3.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(g,f){d.addButton(f,{active:!1,tooltip:g,onPostRender:bG(d,f),onclick:by(d,f)})}),a=c,d3.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(g,f){a.addButton(f,{tooltip:g[0],cmd:g[1]})}),b=c,d3.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(g,f){b.addButton(f,{active:!1,tooltip:g[0],cmd:g[1],onPostRender:bG(b,f)})})},dk=function(a){var b;cj(a),b=a,d3.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(d,c){b.addMenuItem(c,{text:d[0],icon:c,shortcut:d[2],cmd:d[1]})}),b.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:by(b,"code")})},bJ=function(b,a){return function(){var d=this,c=function(){var f="redo"===a?"hasRedo":"hasUndo";return !!b.undoManager&&b.undoManager[f]()};d.disabled(!c()),b.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){d.disabled(b.readonly||!c())})}},aF=function(b){var a,c;(a=b).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:bJ(a,"undo"),cmd:"undo"}),a.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:bJ(a,"redo"),cmd:"redo"}),(c=b).addButton("undo",{tooltip:"Undo",onPostRender:bJ(c,"undo"),cmd:"undo"}),c.addButton("redo",{tooltip:"Redo",onPostRender:bJ(c,"redo"),cmd:"redo"})},eM=function(b){var a,c;(a=b).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(c=a,function(){var d=this;c.on("VisualAid",function(f){d.active(f.hasVisual)}),d.active(c.hasVisual)}),cmd:"mceToggleVisualAid"})},fB={setup:function(b){var a;b.rtl&&(d6.rtl=!0),b.on("mousedown",function(){cl.hideAll()}),(a=b).settings.ui_container&&(bP.container=bD(aw.fromDom(document.body),a.settings.ui_container).fold(e3.constant(null),function(c){return c.dom()})),fg.tooltips=!bP.iOS,d6.translate=function(c){return ek.translate(c)},cw(b),eB(b),dk(b),aF(b),cZ(b),cW(b),a9(b),eM(b),c8(b)}},aa=bb.extend({recalc:function(cr){var ae,be,bt,an,at,ai,dn,bn,Z,de,ct,cn,ce,bi,ci,ar,Y,di,U,V,X,dr,B,O,br,K,J,z,I=[],q=[];ae=cr.settings,an=cr.items().filter(":visible"),at=cr.layoutRect(),bt=ae.columns||Math.ceil(Math.sqrt(an.length)),be=Math.ceil(an.length/bt),di=ae.spacingH||ae.spacing||0,U=ae.spacingV||ae.spacing||0,V=ae.alignH||ae.align,X=ae.alignV||ae.align,ar=cr.paddingBox,z="reverseRows" in ae?ae.reverseRows:cr.isRtl(),V&&"string"==typeof V&&(V=[V]),X&&"string"==typeof X&&(X=[X]);for(ct=0;ct<bt;ct++){I.push(0)}for(cn=0;cn<be;cn++){q.push(0)}for(cn=0;cn<be;cn++){for(ct=0;ct<bt&&(de=an[cn*bt+ct]);ct++){O=(Z=de.layoutRect()).minW,br=Z.minH,I[ct]=O>I[ct]?O:I[ct],q[cn]=br>q[cn]?br:q[cn]}}for(K=at.innerW-ar.left-ar.right,ct=dr=0;ct<bt;ct++){dr+=I[ct]+(0<ct?di:0),K-=(0<ct?di:0)+I[ct]}for(J=at.innerH-ar.top-ar.bottom,cn=B=0;cn<be;cn++){B+=q[cn]+(0<cn?U:0),J-=(0<cn?U:0)+q[cn]}if(dr+=ar.left+ar.right,B+=ar.top+ar.bottom,(bn={}).minW=dr+(at.w-at.innerW),bn.minH=B+(at.h-at.innerH),bn.contentW=bn.minW-at.deltaW,bn.contentH=bn.minH-at.deltaH,bn.minW=Math.min(bn.minW,at.maxW),bn.minH=Math.min(bn.minH,at.maxH),bn.minW=Math.max(bn.minW,at.startMinWidth),bn.minH=Math.max(bn.minH,at.startMinHeight),!at.autoResize||bn.minW===at.minW&&bn.minH===at.minH){var F;at.autoResize&&((bn=cr.layoutRect(bn)).contentW=bn.minW-at.deltaW,bn.contentH=bn.minH-at.deltaH),F="start"===ae.packV?0:0<J?Math.floor(J/be):0;var j=0,G=ae.flexWidths;if(G){for(ct=0;ct<G.length;ct++){j+=G[ct]}}else{j=bt}var L=K/j;for(ct=0;ct<bt;ct++){I[ct]+=G?G[ct]*L:L}for(bi=ar.top,cn=0;cn<be;cn++){for(ce=ar.left,dn=q[cn]+F,ct=0;ct<bt&&(de=an[z?cn*bt+bt-1-ct:cn*bt+ct]);ct++){ci=de.settings,Z=de.layoutRect(),ai=Math.max(I[ct],Z.startMinWidth),Z.x=ce,Z.y=bi,"center"===(Y=ci.alignH||(V?V[ct]||V[0]:null))?Z.x=ce+ai/2-Z.w/2:"right"===Y?Z.x=ce+ai-Z.w:"stretch"===Y&&(Z.w=ai),"center"===(Y=ci.alignV||(X?X[ct]||X[0]:null))?Z.y=bi+dn/2-Z.h/2:"bottom"===Y?Z.y=bi+dn-Z.h:"stretch"===Y&&(Z.h=dn),de.layoutRect(Z),ce+=ai+di,de.recalc&&de.recalc()}bi+=dn+U}}else{if(bn.w=bn.minW,bn.h=bn.minH,cr.layoutRect(bn),this.recalc(cr),null===cr._lastRect){var Q=cr.parent();Q&&(Q._lastRect=null,Q.recalc())}}}}),av=fg.extend({renderHtml:function(){var a=this;return a.classes.add("iframe"),a.canFocus=!1,'<iframe id="'+a._id+'" class="'+a.classes+'" tabindex="-1" src="'+(a.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(a){this.getEl().src=a},html:function(c,b){var d=this,a=this.getEl().contentWindow.document.body;return a?(a.innerHTML=c,b&&b()):d5.setTimeout(function(){d.html(c)}),this}}),ad=fg.extend({init:function(a){this._super(a),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(a){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(a)},help:function(a){this.state.set("help",a)},renderHtml:function(){var b=this,a=b.classPrefix;return'<div id="'+b._id+'" class="'+b.classes+'"><div id="'+b._id+'-body">'+b.encode(b.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+a+"ico "+a+'i-help"></i></button></div></div>'},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.getEl("body").firstChild.data=a.encode(b.value),a.state.get("rendered")&&a.updateLayoutRect()}),a.state.on("change:help",function(b){a.classes.toggle("has-help",b.value),a.state.get("rendered")&&a.updateLayoutRect()}),a._super()}}),cJ=fg.extend({init:function(b){var a=this;a._super(b),a.classes.add("widget").add("label"),a.canFocus=!1,b.multiline&&a.classes.add("autoscroll"),b.strong&&a.classes.add("strong")},initLayoutRect:function(){var b=this,a=b._super();return b.settings.multiline&&(fz.getSize(b.getEl()).width>a.maxW&&(a.minW=a.maxW,b.classes.add("multiline")),b.getEl().style.width=a.minW+"px",a.startMinH=a.h=a.minH=Math.min(a.maxH,fz.getSize(b.getEl()).height)),a},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(a){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(a)},renderHtml:function(){var d,b,f=this,a=f.settings.forId,c=f.settings.html?f.settings.html:f.encode(f.state.get("text"));return !a&&(b=f.settings.forName)&&(d=f.getRoot().find("#"+b)[0])&&(a=d._id),a?'<label id="'+f._id+'" class="'+f.classes+'"'+(a?' for="'+a+'"':"")+">"+c+"</label>":'<span id="'+f._id+'" class="'+f.classes+'">'+c+"</span>"},bindStates:function(){var a=this;return a.state.on("change:text",function(b){a.innerHtml(a.encode(b.value)),a.state.get("rendered")&&a.updateLayoutRect()}),a._super()}}),aU=ch.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(a){this._super(a),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(a){a.classes.add("toolbar-item")}),this._super()}}),cG=aU.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),aA=cS.extend({init:function(b){var a=this;a._renderOpen=!0,a._super(b),b=a.settings,a.classes.add("menubtn"),b.fixedWidth&&a.classes.add("fixed-width"),a.aria("haspopup",!0),a.state.set("menu",b.menu||a.render())},showMenu:function(b){var a,c=this;if(c.menu&&c.menu.visible()&&!1!==b){return c.hideMenu()}c.menu||(a=c.state.get("menu")||[],c.classes.add("opened"),a.length?a={type:"menu",animate:!0,items:a}:(a.type=a.type||"menu",a.animate=!0),a.renderTo?c.menu=a.parent(c).show().renderTo():c.menu=d4.create(a).parent(c).renderTo(),c.fire("createmenu"),c.menu.reflow(),c.menu.on("cancel",function(d){d.control.parent()===c.menu&&(d.stopPropagation(),c.focus(),c.hideMenu())}),c.menu.on("select",function(){c.focus()}),c.menu.on("show hide",function(d){d.control===c.menu&&(c.activeMenu("show"===d.type),c.classes.toggle("opened","show"===d.type)),c.aria("expanded","show"===d.type)}).fire("show")),c.menu.show(),c.menu.layoutRect({w:c.layoutRect().w}),c.menu.repaint(),c.menu.moveRel(c.getEl(),c.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),c.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(a){a.hideMenu&&a.hideMenu()}),this.menu.hide())},activeMenu:function(a){this.classes.toggle("active",a)},renderHtml:function(){var f,b=this,h=b._id,a=b.classPrefix,d=b.settings.icon,g=b.state.get("text"),c="";return(f=b.settings.image)?(d="none","string"!=typeof f&&(f=window.getSelection?f[0]:f[1]),f=" style=\"background-image: url('"+f+"')\""):f="",g&&(b.classes.add("btn-has-text"),c='<span class="'+a+'txt">'+b.encode(g)+"</span>"),d=b.settings.icon?a+"ico "+a+"i-"+d:"",b.aria("role",b.parent() instanceof cG?"menuitem":"button"),'<div id="'+h+'" class="'+b.classes+'" tabindex="-1" aria-labelledby="'+h+'"><button id="'+h+'-open" role="presentation" type="button" tabindex="-1">'+(d?'<i class="'+d+'"'+f+"></i>":"")+c+' <i class="'+a+'caret"></i></button></div>'},postRender:function(){var a=this;return a.on("click",function(b){b.control===a&&function(d,c){for(;d;){if(c===d){return !0}d=d.parentNode}return !1}(b.target,a.getEl())&&(a.focus(),a.showMenu(!b.aria),b.aria&&a.menu.items().filter(":visible")[0].focus())}),a.on("mouseenter",function(d){var c,f=d.control,b=a.parent();f&&b&&f instanceof aA&&f.parent()===b&&(b.items().filter("MenuButton").each(function(g){g.hideMenu&&g!==f&&(g.menu&&g.menu.visible()&&(c=!0),g.hideMenu())}),c&&(f.focus(),f.showMenu()))}),a._super()},bindStates:function(){var a=this;return a.state.on("change:menu",function(){a.menu&&a.menu.remove(),a.menu=null}),a._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),fs=cl.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(b){if(b.autohide=!0,b.constrainToViewport=!0,"function"==typeof b.items&&(b.itemsFactory=b.items,b.items=[]),b.itemDefaults){for(var a=b.items,c=a.length;c--;){a[c]=d3.extend({},b.itemDefaults,a[c])}}this._super(b),this.classes.add("menu"),b.animate&&11!==bP.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var b,c=this;function a(){c.throbber&&(c.throbber.hide(),c.throbber=null)}c.settings.itemsFactory&&(c.throbber||(c.throbber=new aJ(c.getEl("body"),!0),0===c.items().length?(c.throbber.show(),c.fire("loading")):c.throbber.show(100,function(){c.items().remove(),c.fire("loading")}),c.on("hide close",a)),c.requestTime=b=(new Date).getTime(),c.settings.itemsFactory(function(d){0!==d.length?c.requestTime===b&&(c.getEl().style.width="",c.getEl("body").style.width="",a(),c.items().remove(),c.getEl("body").innerHTML="",c.add(d),c.renderNew(),c.fire("loaded")):c.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var a=this;return a.items().each(function(c){var b=c.settings;if(b.icon||b.image||b.selectable){return !(a._hasIcons=!0)}}),a.settings.itemsFactory&&a.on("postrender",function(){a.settings.itemsFactory&&a.load()}),a.on("show hide",function(b){b.control===a&&("show"===b.type?d5.setTimeout(function(){a.classes.add("in")},0):a.classes.remove("in"))}),a._super()}}),cz=aA.extend({init:function(b){var a,d,g,h,c=this;c._super(b),b=c.settings,c._values=a=b.values,a&&("undefined"!=typeof b.value&&function f(e){for(var i=0;i<e.length;i++){if(d=e[i].selected||b.value===e[i].value){return g=g||e[i].text,c.state.set("value",e[i].value),!0}if(e[i].menu&&f(e[i].menu)){return !0}}}(a),!d&&0<a.length&&(g=a[0].text,c.state.set("value",a[0].value)),c.state.set("menu",a)),c.state.set("text",b.text||g),c.classes.add("listbox"),c.on("select",function(j){var i=j.control;h&&(j.lastControl=h),b.multiple?i.active(!i.active()):c.value(j.control.value()),h=i})},value:function(a){return 0===arguments.length?this.state.get("value"):(void 0===a||(this.settings.values?0<d3.grep(this.settings.values,function(b){return b.value===a}).length?this.state.set("value",a):null===a&&this.state.set("value",null):this.state.set("value",a)),this)},bindStates:function(){var a=this;return a.on("show",function(c){var b,d;b=c.control,d=a.value(),b instanceof fs&&b.items().each(function(f){f.hasMenus()||f.active(f.value()===d)})}),a.state.on("change:value",function(b){var d=function c(f,h){var e;if(f){for(var g=0;g<f.length;g++){if(f[g].value===h){return f[g]}if(f[g].menu&&(e=c(f[g].menu,h))){return e}}}}(a.state.get("menu"),b.value);d?a.text(d.text):a.text(a.settings.text)}),a._super()}}),dB=fg.extend({Defaults:{border:0,role:"menuitem"},init:function(b){var a,c=this;c._super(b),b=c.settings,c.classes.add("menu-item"),b.menu&&c.classes.add("menu-item-expand"),b.preview&&c.classes.add("menu-item-preview"),"-"!==(a=c.state.get("text"))&&"|"!==a||(c.classes.add("menu-item-sep"),c.aria("role","separator"),c.state.set("text","-")),b.selectable&&(c.aria("role","menuitemcheckbox"),c.classes.add("menu-item-checkbox"),b.icon="selected"),b.preview||b.selectable||c.classes.add("menu-item-normal"),c.on("mousedown",function(d){d.preventDefault()}),b.menu&&!b.ariaHideMenu&&c.aria("haspopup",!0)},hasMenus:function(){return !!this.settings.menu},showMenu:function(){var b,f=this,d=f.settings,a=f.parent();if(a.items().each(function(g){g!==f&&g.hideMenu()}),d.menu){(b=f.menu)?b.show():((b=d.menu).length?b={type:"menu",items:b}:b.type=b.type||"menu",a.settings.itemDefaults&&(b.itemDefaults=a.settings.itemDefaults),(b=f.menu=d4.create(b).parent(f).renderTo()).reflow(),b.on("cancel",function(g){g.stopPropagation(),f.focus(),b.hide()}),b.on("show hide",function(g){g.control.items&&g.control.items().each(function(h){h.active(h.settings.selected)})}).fire("show"),b.on("hide",function(g){g.control===b&&f.classes.remove("selected")}),b.submenu=!0),b._parentMenu=a,b.classes.add("menu-sub");var c=b.testMoveRel(f.getEl(),f.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);b.moveRel(f.getEl(),c),c="menu-sub-"+(b.rel=c),b.classes.remove(b._lastRel).add(c),b._lastRel=c,f.classes.add("selected"),f.aria("expanded",!0)}},hideMenu:function(){var a=this;return a.menu&&(a.menu.items().each(function(b){b.hideMenu&&b.hideMenu()}),a.menu.hide(),a.aria("expanded",!1)),a},renderHtml:function(){var p,y=this,h=y._id,k=y.settings,b=y.classPrefix,g=y.state.get("text"),z=y.settings.icon,w="",j=k.shortcut,x=y.encode(k.url);function v(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(c){var a=k.match||"";return a?c.replace(new RegExp(v(a),"gi"),function(d){return"!mce~match["+d+"]mce~match!"}):c}function m(a){return a.replace(new RegExp(v("!mce~match["),"g"),"<b>").replace(new RegExp(v("]mce~match!"),"g"),"</b>")}return z&&y.parent().classes.add("menu-has-icons"),k.image&&(w=" style=\"background-image: url('"+k.image+"')\""),j&&(j=function(d){var c,f,a={};for(a=bP.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},d=d.split("+"),c=0;c<d.length;c++){(f=a[d[c].toLowerCase()])&&(d[c]=f)}return d.join("+")}(j)),z=b+"ico "+b+"i-"+(y.settings.icon||"none"),p="-"!==g?'<i class="'+z+'"'+w+"></i>\xa0":"",g=m(y.encode(q(g))),x=m(y.encode(q(x))),'<div id="'+h+'" class="'+y.classes+'" tabindex="-1">'+p+("-"!==g?'<span id="'+h+'-text" class="'+b+'text">'+g+"</span>":"")+(j?'<div id="'+h+'-shortcut" class="'+b+'menu-shortcut">'+j+"</div>":"")+(k.menu?'<div class="'+b+'caret"></div>':"")+(x?'<div class="'+b+'menu-item-link">'+x+"</div>":"")+"</div>"},postRender:function(){var b=this,d=b.settings,c=d.textStyle;if("function"==typeof c&&(c=c.call(this)),c){var a=b.getEl("text");a&&(a.setAttribute("style",c),b._textStyle=c)}return b.on("mouseenter click",function(f){f.control===b&&(d.menu||"click"!==f.type?(b.showMenu(),f.aria&&b.menu.focus(!0)):(b.fire("select"),d5.requestAnimationFrame(function(){b.parent().hideAll()})))}),b._super(),b},hover:function(){return this.parent().items().each(function(a){a.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(a){return function(d,c){var f=d._textStyle;if(f){var b=d.getEl("text");b.setAttribute("style",f),c&&(b.style.color="",b.style.backgroundColor="")}}(this,a),void 0!==a&&this.aria("checked",a),this._super(a)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),cm=b7.extend({Defaults:{classes:"radio",role:"radio"}}),c1=fg.extend({renderHtml:function(){var b=this,a=b.classPrefix;return b.classes.add("resizehandle"),"both"===b.settings.direction&&b.classes.add("resizehandle-both"),b.canFocus=!1,'<div id="'+b._id+'" class="'+b.classes+'"><i class="'+a+"ico "+a+'i-resize"></i></div>'},postRender:function(){var a=this;a._super(),a.resizeDragHelper=new bI(this._id,{start:function(){a.fire("ResizeStart")},drag:function(b){"both"!==a.settings.direction&&(b.deltaX=0),a.fire("Resize",b)},stop:function(){a.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function bM(b){var a="";if(b){for(var c=0;c<b.length;c++){a+='<option value="'+b[c]+'">'+b[c]+"</option>"}}return a}var dp=fg.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(a){var b=this;b._super(a),b.settings.size&&(b.size=b.settings.size),b.settings.options&&(b._options=b.settings.options),b.on("keydown",function(d){var c;13===d.keyCode&&(d.preventDefault(),b.parents().reverse().each(function(f){if(f.toJSON){return c=f,!1}}),b.fire("submit",{data:c.toJSON()}))})},options:function(a){return arguments.length?(this.state.set("options",a),this):this.state.get("options")},renderHtml:function(){var b,a=this,c="";return b=bM(a._options),a.size&&(c=' size = "'+a.size+'"'),'<select id="'+a._id+'" class="'+a.classes+'"'+c+">"+b+"</select>"},bindStates:function(){var a=this;return a.state.on("change:options",function(b){a.getEl().innerHTML=bM(b.value)}),a._super()}});function aK(b,a,c){return b<a&&(b=a),c<b&&(b=c),b}function bh(b,a,c){b.setAttribute("aria-"+a,c)}function a4(f,b){var h,a,d,g,c;"v"===f.settings.orientation?(d="top",a="height",h="h"):(d="left",a="width",h="w"),c=f.getEl("handle"),g=((f.layoutRect()[h]||100)-fz.getSize(c)[a])*((b-f._minValue)/(f._maxValue-f._minValue))+"px",c.style[d]=g,c.style.height=f.layoutRect().h+"px",bh(c,"valuenow",b),bh(c,"valuetext",""+f.settings.previewFilter(b)),bh(c,"valuemin",f._minValue),bh(c,"valuemax",f._maxValue)}var db=fg.extend({init:function(b){var a=this;b.previewFilter||(b.previewFilter=function(c){return Math.round(100*c)/100}),a._super(b),a.classes.add("slider"),"v"===b.orientation&&a.classes.add("vertical"),a._minValue=eb.isNumber(b.minValue)?b.minValue:0,a._maxValue=eb.isNumber(b.maxValue)?b.maxValue:100,a._initValue=a.state.get("value")},renderHtml:function(){var b=this._id,a=this.classPrefix;return'<div id="'+b+'" class="'+this.classes+'"><div id="'+b+'-handle" class="'+a+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var x,C,j,q,b,g,D,A,p,B,z,y,w,v,k=this;x=k._minValue,C=k._maxValue,"v"===k.settings.orientation?(j="screenY",q="top",b="height",g="h"):(j="screenX",q="left",b="width",g="w"),k._super(),function(d,c){function a(m){var h,o,f,l;h=aK(h=(((h=k.value())+(l=o=d))/((f=c)-l)+0.05*m)*(f-o)-o,d,c),k.value(h),k.fire("dragstart",{value:h}),k.fire("drag",{value:h}),k.fire("dragend",{value:h})}k.on("keydown",function(f){switch(f.keyCode){case 37:case 38:a(-1);break;case 39:case 40:a(1)}})}(x,C),D=x,A=C,p=k.getEl("handle"),k._dragHelper=new bI(k._id,{handle:k._id+"-handle",start:function(a){B=a[j],z=parseInt(k.getEl("handle").style[q],10),y=(k.layoutRect()[g]||100)-fz.getSize(p)[b],k.fire("dragstart",{value:v})},drag:function(c){var a=c[j]-B;w=aK(z+a,0,y),p.style[q]=w+"px",v=D+w/y*(A-D),k.value(v),k.tooltip().text(""+k.settings.previewFilter(v)).show().moveRel(p,"bc tc"),k.fire("drag",{value:v})},stop:function(){k.tooltip().hide(),k.fire("dragend",{value:v})}})},repaint:function(){this._super(),a4(this,this.value())},bindStates:function(){var a=this;return a.state.on("change:value",function(b){a4(a,b.value)}),a._super()}}),fh=fg.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),dL=aA.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var c,b,d=this.getEl(),a=this.layoutRect();return this._super(),c=d.firstChild,b=d.lastChild,cM(c).css({width:a.w-fz.getSize(b).width,height:a.h-2}),cM(b).css({height:a.h-2}),this},activeMenu:function(a){cM(this.getEl().lastChild).toggleClass(this.classPrefix+"active",a)},renderHtml:function(){var h,k,d=this,g=d._id,b=d.classPrefix,c=d.state.get("icon"),m=d.state.get("text"),j=d.settings,f="";return(h=j.image)?(c="none","string"!=typeof h&&(h=window.getSelection?h[0]:h[1]),h=" style=\"background-image: url('"+h+"')\""):h="",c=j.icon?b+"ico "+b+"i-"+c:"",m&&(d.classes.add("btn-has-text"),f='<span class="'+b+'txt">'+d.encode(m)+"</span>"),k="boolean"==typeof j.active?' aria-pressed="'+j.active+'"':"",'<div id="'+g+'" class="'+d.classes+'" role="button"'+k+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(c?'<i class="'+c+'"'+h+"></i>":"")+f+'</button><button type="button" class="'+b+'open" hidefocus="1" tabindex="-1">'+(d._menuBtnText?(c?"\xa0":"")+d._menuBtnText:"")+' <i class="'+b+'caret"></i></button></div>'},postRender:function(){var a=this.settings.onclick;return this.on("click",function(c){var b=c.target;if(c.control===this){for(;b;){if(c.aria&&"down"!==c.aria.key||"BUTTON"===b.nodeName&&-1===b.className.indexOf("open")){return c.stopImmediatePropagation(),void (a&&a.call(this,c))}b=b.parentNode}}}),delete this.settings.onclick,this._super()}}),eX=cT.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return !0}}),ak=ac.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(b){var a;this.activeTabId&&(a=this.getEl(this.activeTabId),cM(a).removeClass(this.classPrefix+"active"),a.setAttribute("aria-selected","false")),this.activeTabId="t"+b,(a=this.getEl("t"+b)).setAttribute("aria-selected","true"),cM(a).addClass(this.classPrefix+"active"),this.items()[b].show().fire("showtab"),this.reflow(),this.items().each(function(d,c){b!==c&&d.hide()})},renderHtml:function(){var a=this,c=a._layout,b="",d=a.classPrefix;return a.preRender(),c.preRender(a),a.items().each(function(g,f){var h=a._id+"-t"+f;g.aria("role","tabpanel"),g.aria("labelledby",h),b+='<div id="'+h+'" class="'+d+'tab" unselectable="on" role="tab" aria-controls="'+g._id+'" aria-selected="false" tabIndex="-1">'+a.encode(g.settings.title)+"</div>"}),'<div id="'+a._id+'" class="'+a.classes+'" hidefocus="1" tabindex="-1"><div id="'+a._id+'-head" class="'+d+'tabs" role="tablist">'+b+'</div><div id="'+a._id+'-body" class="'+a.bodyClasses+'">'+c.renderHtml(a)+"</div></div>"},postRender:function(){var a=this;a._super(),a.settings.activeTab=a.settings.activeTab||0,a.activateTab(a.settings.activeTab),this.on("click",function(c){var b=c.target.parentNode;if(b&&b.id===a._id+"-head"){for(var d=b.childNodes.length;d--;){b.childNodes[d]===c.target&&a.activateTab(d)}}})},initLayoutRect:function(){var d,b,f,a=this;b=(b=fz.getSize(a.getEl("head")).width)<0?0:b,f=0,a.items().each(function(g){b=Math.max(b,g.layoutRect().minW),f=Math.max(f,g.layoutRect().minH)}),a.items().each(function(g){g.settings.x=0,g.settings.y=0,g.settings.w=b,g.settings.h=f,g.layoutRect({x:0,y:0,w:b,h:f})});var c=fz.getSize(a.getEl("head")).height;return a.settings.minWidth=b,a.settings.minHeight=f+c,(d=a._super()).deltaH+=c,d.innerH=d.h-d.deltaH,d}}),ca=fg.extend({init:function(a){var b=this;b._super(a),b.classes.add("textbox"),a.multiline?b.classes.add("multiline"):(b.on("keydown",function(d){var c;13===d.keyCode&&(d.preventDefault(),b.parents().reverse().each(function(f){if(f.toJSON){return c=f,!1}}),b.fire("submit",{data:c.toJSON()}))}),b.on("keyup",function(c){b.state.set("value",c.target.value)}))},repaint:function(){var h,d,k,c,g,j=this,f=0;h=j.getEl().style,d=j._layoutRect,g=j._lastRepaintRect||{};var b=document;return !j.settings.multiline&&b.all&&(!b.documentMode||b.documentMode<=8)&&(h.lineHeight=d.h-f+"px"),c=(k=j.borderBox).left+k.right+8,f=k.top+k.bottom+(j.settings.multiline?8:0),d.x!==g.x&&(h.left=d.x+"px",g.x=d.x),d.y!==g.y&&(h.top=d.y+"px",g.y=d.y),d.w!==g.w&&(h.width=d.w-c+"px",g.w=d.w),d.h!==g.h&&(h.height=d.h-f+"px",g.h=d.h),j._lastRepaintRect=g,j.fire("repaint",{},!1),j},renderHtml:function(){var b,c,d=this,a=d.settings;return b={id:d._id,hidefocus:"1"},d3.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(f){b[f]=a[f]}),d.disabled()&&(b.disabled="disabled"),a.subtype&&(b.type=a.subtype),(c=fz.create(a.multiline?"textarea":"input",b)).value=d.state.get("value"),c.className=d.classes.toString(),c.outerHTML},value:function(a){return arguments.length?(this.state.set("value",a),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var a=this;a.getEl().value=a.state.get("value"),a._super(),a.$el.on("change",function(b){a.state.set("value",b.target.value),a.fire("change",b)})},bindStates:function(){var a=this;return a.state.on("change:value",function(b){a.getEl().value!==b.value&&(a.getEl().value=b.value)}),a.state.on("change:disabled",function(b){a.getEl().disabled=b.value}),a._super()},remove:function(){this.$el.off(),this._super()}}),bW=function(){return{Selector:bz,Collection:eE,ReflowQueue:cY,Control:d6,Factory:d4,KeyboardNavigation:dx,Container:ch,DragHelper:bI,Scrollable:au,Panel:ac,Movable:dw,Resizable:cI,FloatPanel:cl,Window:b2,MessageBox:ej,Tooltip:da,Widget:fg,Progress:dK,Notification:aj,Layout:dU,AbsoluteLayout:bb,Button:cS,ButtonGroup:a0,Checkbox:b7,ComboBox:bU,ColorBox:ba,PanelButton:fo,ColorButton:aQ,ColorPicker:dT,Path:c9,ElementPath:ck,FormItem:dl,Form:bK,FieldSet:aG,FilePicker:ap,FitLayout:cf,FlexLayout:b0,FlowLayout:cT,FormatControls:fB,GridLayout:aa,Iframe:av,InfoBox:ad,Label:cJ,Toolbar:aU,MenuBar:cG,MenuButton:aA,MenuItem:dB,Throbber:aJ,Menu:fs,ListBox:cz,Radio:cm,ResizeHandle:c1,SelectBox:dp,Slider:db,Spacer:fh,SplitButton:dL,StackLayout:eX,TabPanel:ak,TextBox:ca,DropZone:dz,BrowseButton:dJ}},cQ=function(a){a.ui?d3.each(bW(),function(c,b){a.ui[b]=c}):a.ui=bW()};d3.each(bW(),function(b,a){d4.add(a,b)}),cQ(window.tinymce?window.tinymce:{}),ed.add("modern",function(a){return fB.setup(a),fF(a)})}();